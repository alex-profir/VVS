{"version":3,"sources":["services/config.ts","utils/utilFunctions.ts","utils/axios.ts","services/auth.service.ts","store/reducers/index.ts","store/reducers/user.reducer.ts","store/index.ts","services/user.service.ts","store/functions/user.functions.ts","hooks/UserHook.ts","contexts/UserContext.tsx","contexts/SocketIoContext.tsx","contexts/ContextsProvider.tsx","pages/Auth/SignUp.tsx","components/guards/AuthGuard.tsx","pages/Auth/SignIn.tsx","pages/Dashboard/Dashboard.tsx","hooks/useElementHeight.ts","hooks/useEffecyAsync.ts","pages/Dashboard/user.profile.tsx","services/file.service.ts","pages/Dashboard/Messenger.tsx","services/chatRoom.service.ts","pages/Dashboard/user.search.tsx","routes/index.tsx","assets/svg/arrow.svg","pages/Dashboard/Landing.tsx","assets/svg/bell.svg","assets/svg/bolt.svg","assets/svg/caret.svg","assets/svg/chevron.svg","assets/svg/cog.svg","assets/svg/messenger.svg","assets/svg/plus.svg","components/layouts/MainLayout.tsx","pages/404NotFound.tsx","components/layouts/LoginLayout.tsx","hooks/useInitialize.ts","pages/LoaderPage.tsx","routes/Routes.tsx","styles/theme/palette.ts","styles/theme/typography.ts","App.tsx","styles/theme/theme.ts","reportWebVitals.ts","index.tsx"],"names":["endpointURL","process","headers","userTokenLocalStorageKey","isAxiosError","opt","storeToken","token","storageData","localStorage","setItem","JSON","stringify","retrieveStorageToken","getItem","parse","Authorization","getImageOrFallback","url","Promise","resolve","reject","img","Image","src","onload","onerror","ev","axiosInstance","axios","create","baseURL","login","user","a","post","register","getCurrentUser","get","reducers","userReducer","state","action","type","error","avatar","appReducer","combineReducers","composeEnhancers","composeWithDevTools","name","useSelector","selector","reduxUseSelector","useDispatch","reduxUseDispatch","store","createStore","applyMiddleware","reduxThunk","postProfilePicture","file","data","FormData","append","getUserById","userId","sendFriendRequest","id","acceptFriendRequest","rejectFriendRequest","searchUsers","query","obj","queryString","Object","entries","map","k","v","join","generateQueryString","uploadUserProfilePicture","dispatch","request","filename","useUser","fetchUser","req","logout","removeItem","UserContext","createContext","SocketContext","indexes","children","Provider","value","useContext","useState","socket","setSocket","useEffect","io","emit","on","_id","connected","disconnect","GeneralProvider","item","length","Fragment","Item","shift","ContextsProvider","useStyles","makeStyles","theme","root","height","display","placeItems","image","backgroundImage","backgroundRepeat","backgroundColor","palette","mode","grey","backgroundSize","backgroundPosition","submitError","color","dark","fontSize","fontWeight","textAlign","submitSuccess","success","link","primary","paper","padding","spacing","flexDirection","alignItems","SignUp","classes","submited","setSubmited","Box","className","title","Paper","Typography","component","variant","initialValues","first_name","last_name","password","email","submit","chatRooms","friends","friendRequests","onSubmit","values","setErrors","message","response","console","log","handleChange","errors","isSubmitting","Grid","container","xs","sm","TextField","label","required","fullWidth","onChange","helperText","Button","disabled","justifyContent","Link","to","RouterLink","AuthGuard","margin","secondary","main","form","width","marginTop","SignIn","routeTo","useRouting","md","elevation","square","urls","dashboard","autoComplete","autoFocus","my","option","randn_bm","min","max","skew","u","Math","random","num","sqrt","cos","PI","pow","Dashboard","mustSpin","setMustSpin","prizeNumber","setPrizeNumber","containerLoaded","setContainerLoaded","showRewards","setShowRewards","elemId","onResize","deps","useMediaQuery","breakpoints","down","setHeight","setWidth","fn","element","document","getElementById","clientHeight","clientWidth","window","addEventListener","removeEventListener","useElementHeight","spinnerHeight","style","onLoad","position","left","top","zIndex","transform","Fab","onClick","newPrizeNumber","floor","sx","mustStartSpinning","onStopSpinning","outerBorderWidth","radiusLineWidth","innerRadius","innerBorderWidth","backgroundColors","textColors","isPromise","useEffectAsync","setError","cleanup","fnResult","then","cb","catch","err","e","centrate","default","background","light","avatarContainer","linkButton","textTransform","UserProfile","p","loggedUser","history","setUser","backgroundRgb","setbackgroundRgb","isMyProfile","match","params","isFriend","includes","hasRequestFriend","hasPendingFriendRequest","useCallback","payload","handleCapture","target","files","dp","sendFriendRequestHandler","r","g","b","borderRadius","marginBottom","Avatar","boxShadow","imgProps","crossOrigin","event","rgb","imgEl","defaultRGB","canvas","createElement","context","getContext","i","count","naturalHeight","offsetHeight","naturalWidth","offsetWidth","drawImage","getImageData","blockSize","getAverageRGB","flexGrow","unfriend","accept","htmlFor","marginLeft","goBack","putFile","put","AvatarBox","styled","marginRight","cursor","ChatBubbleContainer","highlighted","hover","common","white","text","ChatSidebar","borderRight","divider","ChatTextfield","ChatMessageComponent","isEmoji","test","isImage","setIsImage","avatarBox","userProfile","alt","bubble","toString","objectFit","minWidth","split","singleWord","str","RegExp","href","rel","Date","now","Messenger","connectedRoom","setConnectedRoom","setChatRooms","presentUsers","setPresentUsers","ids","rooms","members","room","flat","uniqueMembers","Set","users","timeout","useRef","typing","React","anchorEl","setAnchorEl","inputeRef","containerRef","setMessage","messageList","setMessageList","setUsersTyping","filter","current","scrollTop","scrollHeight","onEmojiClick","emojiObject","emoji","focus","content","togglePopper","currentTarget","lg","List","ListItem","button","ListItemIcon","Badge","overlap","anchorOrigin","vertical","horizontal","ListItemText","currentUser","find","el","stopPropagation","ref","overflowY","msg","isMessageOwner","getTime","enableReinitialize","mr","size","mx","Popper","Boolean","undefined","open","disablePortal","ClickAwayListener","onClickAway","mb","disableAutoFocus","skinTone","SKIN_TONE_MEDIUM_DARK","groupNames","smileys_people","native","inputRef","clearTimeout","setTimeout","ml","UserSearch","setUsers","search","setSearch","searchUsersHandler","limit","offset","results","placeholder","m","messenger","useHistory","push","route","parameter","fromEntries","_path","authRoutes","path","guard","dashboardRoutes","authRouter","dashboardRouter","from","_excluded","_extends","assign","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgArrow","_ref","svgRef","titleId","props","viewBox","fill","d","ForwardRef","SvgBell","SvgBolt","SvgCaret","SvgChevron","SvgCog","SvgMessenger","SvgPlus","OpenDropwdownContext","Navbar","RenderUserRequest","Consumer","setOpen","FriendRequestDropdownItem","DropdownMenu","menuInitial","options","activeMenu","setActiveMenu","menuHeight","setMenuHeight","dropdownRef","calcHeight","firstChild","DropdownItem","rightIcon","leftIcon","goToMenu","touchEvent","CSSTransition","in","entryPoint","classNames","unmountOnExit","onEnter","j","CustomDropdown","rest","Renderer","NavItem","icon","badgeContent","thisIsOpen","MainLayout","MenuOptions","dropdownEntryPoint","dropdownMenu","index","overflowX","maxWidth","NotFound","direction","LoginLayout","useInitialize","checked","setChecked","checkSession","LoaderBox","LoaderPage","createRoutes","Layout","routes","Page","Guard","child","exact","render","Routes","contrastText","typography","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","App","titleTemplate","defaultTitle","CssBaseline","StyledEngineProvider","injectFirst","ThemeProvider","createTheme","adaptV4Theme","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM"],"mappings":"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","file":"static/js/main.e6643b93.chunk.js","sourcesContent":["export const endpointURL = process.env.REACT_APP_API_URL // || \"http://localhost:4000\";\r\nexport const headers: {\r\n    Authorization?: string\r\n} = {};\r\n","import { AxiosError } from \"axios\";\r\nimport { headers } from \"services/config\";\r\nimport { BasicQuerySearch } from \"typescript/models/API\";\r\n\r\nexport const userTokenLocalStorageKey = \"user-RP\"\r\n\r\nexport function isAxiosError<T>(opt: any): opt is AxiosError<T> {\r\n    return \"isAxiosError\" in opt;\r\n}\r\n\r\nexport function storeToken(token: string) {\r\n    const storageData = {\r\n        token\r\n    }\r\n    localStorage.setItem(userTokenLocalStorageKey, JSON.stringify(storageData));\r\n}\r\nexport function retrieveStorageToken() {\r\n    const storageData = localStorage.getItem(userTokenLocalStorageKey);\r\n    if (storageData) {\r\n        const { token } = JSON.parse(storageData);\r\n        headers.Authorization = `Bearer ${token}`\r\n        return token;\r\n    }\r\n}\r\n\r\nexport function removeTokenFromLocalStorage() {\r\n    localStorage.removeItem(userTokenLocalStorageKey);\r\n}\r\n\r\n//https://stackoverflow.com/questions/2541481/get-average-color-of-image-via-javascript\r\nexport function getAverageRGB(imgEl: HTMLImageElement) {\r\n\r\n    const blockSize = 5;\r\n    const defaultRGB = { r: 0, g: 0, b: 0 };\r\n    const canvas = document.createElement('canvas');\r\n    const context = canvas.getContext && canvas.getContext('2d');\r\n    let data, width, height\r\n    let i = -4;\r\n    let length;\r\n    const rgb = { r: 0, g: 0, b: 0 };\r\n    let count = 0;\r\n\r\n\r\n    if (!context) {\r\n        return defaultRGB;\r\n    }\r\n\r\n    height = canvas.height = imgEl.naturalHeight || imgEl.offsetHeight || imgEl.height;\r\n    width = canvas.width = imgEl.naturalWidth || imgEl.offsetWidth || imgEl.width;\r\n\r\n    context.drawImage(imgEl, 0, 0);\r\n\r\n    try {\r\n        data = context.getImageData(0, 0, width, height);\r\n    } catch (e) {\r\n        /* security error, img on diff domain */\r\n        return defaultRGB;\r\n    }\r\n\r\n    length = data.data.length;\r\n\r\n    while ((i += blockSize * 4) < length) {\r\n        ++count;\r\n        rgb.r += data.data[i];\r\n        rgb.g += data.data[i + 1];\r\n        rgb.b += data.data[i + 2];\r\n    }\r\n\r\n    // ~~ used to floor values\r\n    rgb.r = ~~(rgb.r / count);\r\n    rgb.g = ~~(rgb.g / count);\r\n    rgb.b = ~~(rgb.b / count);\r\n\r\n    return rgb;\r\n\r\n}\r\n\r\nexport function getImageOrFallback(url: string) {\r\n    return new Promise((resolve, reject) => {\r\n        const img = new Image()\r\n        img.src = url\r\n        img.onload = () => resolve(url)\r\n        img.onerror = (ev) => {\r\n            reject(ev)\r\n        }\r\n    })\r\n}\r\n\r\n// https://stackoverflow.com/questions/5717093/check-if-a-javascript-string-is-a-url\r\nexport function validURL(str: string) {\r\n    const pattern = new RegExp('^(https?:\\\\/\\\\/)?' + // protocol\r\n        '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name\r\n        '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\r\n        '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*' + // port and path\r\n        '(\\\\?[;&a-z\\\\d%_.~+=-]*)?' + // query string\r\n        '(\\\\#[-a-z\\\\d_]*)?$', 'i'); // fragment locator\r\n    return !!pattern.test(str);\r\n}\r\n\r\n// type Key<K extends string & keyof BasicQuerySearch> = `${K}=${Exclude<BasicQuerySearch[K], undefined>}`\r\nexport function generateQueryString<T extends BasicQuerySearch>(obj: T) {\r\n    const queryString = Object.entries(obj).map(([k, v]) => `${k}=${v}`).join(\"&\");\r\n    return queryString ? `?${queryString}` : ''\r\n}","import axios from \"axios\";\r\nimport { endpointURL } from \"services/config\";\r\n\r\nconst axiosInstance = axios.create({\r\n    baseURL: endpointURL\r\n})\r\n\r\nexport default axiosInstance;","import { FullUser, User } from \"typescript/models/User\";\r\nimport axios from \"utils/axios\";\r\nimport { headers } from \"./config\";\r\n\r\nexport const login = async (user: { email: string, password: string }) => {\r\n    return axios.post<{\r\n        user: FullUser,\r\n        token: string;\r\n    }>(\"/auth/login\", user);\r\n}\r\nexport const register = (user: User) => {\r\n    return axios.post<{\r\n        user: FullUser\r\n    }>(\"/auth/register\", user);\r\n}\r\n\r\nexport const forgotPassword = () => {\r\n    throw new Error(\"Not implemented yet\");\r\n}\r\n\r\nexport const getCurrentUser = () => {\r\n    return axios.get<FullUser>(\"/auth/current-user\", { headers });\r\n}","import { combineReducers } from \"redux\";\r\nimport { ActionsFromMap, StateFromMap } from \"store/utils\";\r\nimport { userReducer } from \"./user.reducer\"\r\nconst reducers = {\r\n    userReducer\r\n}\r\n\r\nexport type AppState = StateFromMap<typeof reducers>\r\n// export interface AppState extends StateFromMap<typeof reducers> {}\r\n\r\nexport type AppActions = ActionsFromMap<typeof reducers>\r\n\r\n\r\nexport const appReducer = combineReducers<AppState, AppActions>(reducers as any);\r\n","import { ActionsOf, init } from \"store/utils\";\r\nimport { ServerErrorValue } from \"typescript/models/ServerError\";\r\nimport { FullUser } from \"typescript/models/User\";\r\nimport * as actions from \"../actions/user.actions\"\r\n\r\nexport type UserActions = typeof actions\r\n\r\nexport function userReducer(\r\n    state = init<FullUser & { error?: ServerErrorValue }>(null as any),\r\n    action: ActionsOf<UserActions>\r\n): typeof state {\r\n    switch (action.type) {\r\n        case \"USER_LOGIN\":\r\n            return {\r\n                ...state,\r\n                ...action.user,\r\n            };\r\n        case \"USER_REGISTER\": {\r\n            return action.user;\r\n        }\r\n        case \"SET_USER\": {\r\n            return action.user;\r\n        }\r\n        case \"USER_LOGIN_ERROR\":\r\n            return {\r\n                ...state,\r\n                error: action.error\r\n            };\r\n        case \"SET_USER_PROFILE\": {\r\n            return {\r\n                ...state,\r\n                avatar: action.avatar\r\n            }\r\n        }\r\n        case \"USER_LOGOUT\": {\r\n            return null!;\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}","import { createStore, applyMiddleware, } from \"redux\";\r\nimport reduxThunk, { ThunkDispatch } from \"redux-thunk\";\r\nimport {\r\n    useSelector as reduxUseSelector,\r\n    useDispatch as reduxUseDispatch\r\n} from \"react-redux\";\r\nimport { AppActions, appReducer, AppState } from \"./reducers\";\r\n\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\n\r\nconst composeEnhancers = composeWithDevTools({\r\n    name:\"Roly Poly\",\r\n});\r\nexport const useSelector = <TSelector>(selector: (state: AppState) => TSelector) => reduxUseSelector(selector);\r\nexport const useDispatch = () => reduxUseDispatch<typeof store[\"dispatch\"]>() as ThunkDispatch<AppState, void, AppActions>;\r\n\r\nexport const store = createStore(\r\n    appReducer,\r\n    composeEnhancers(applyMiddleware(reduxThunk))\r\n);","import { BasicQuerySearch, QueryResult } from \"typescript/models/API\";\r\nimport { FullUser } from \"typescript/models/User\";\r\nimport axios from \"utils/axios\";\r\nimport { generateQueryString } from \"utils/utilFunctions\";\r\nimport { headers } from \"./config\";\r\n\r\nexport const postProfilePicture = (file: File) => {\r\n    const data = new FormData();\r\n    data.append(\"file\", file);\r\n    return axios.post<{\r\n        url: string;\r\n        filename: string;\r\n    }>(\"/user/upload-pfp\", data, { headers });\r\n}\r\nexport const getUserById = (userId: string) => {\r\n    return axios.get<FullUser>(`/user/${userId}`, { headers });\r\n}\r\n\r\nexport const sendFriendRequest = (userId: string) => {\r\n    return axios.post<any>(`/user/send-friend-request`, {\r\n        id: userId\r\n    }, { headers });\r\n}\r\n\r\n\r\nexport const acceptFriendRequest = (userId: string) => {\r\n    return axios.post<any>(`/user/accept-friend-request`, {\r\n        id: userId\r\n    }, { headers });\r\n}\r\nexport const rejectFriendRequest = (userId: string) => {\r\n    return axios.post<any>(`/user/reject-friend-request`, {\r\n        id: userId\r\n    }, { headers });\r\n}\r\nexport const unfriend = (userId: string) => {\r\n    return axios.post<any>(`/user/unfriend`, {\r\n        id: userId\r\n    }, { headers });\r\n}\r\n\r\nexport const searchUsers = (query: BasicQuerySearch) => {\r\n    return axios.get<QueryResult<FullUser>>(`/user/search/${generateQueryString(query)}`,)\r\n}\r\nexport const searchUsersInIds = (ids: string[]) => {\r\n    return axios.post<FullUser[]>(`/user/search-ids`, { ids }, { headers })\r\n}","import { UserActions } from \"store/reducers/user.reducer\";\r\nimport { createDispatcher } from \"store/utils\";\r\nimport { ServerError } from \"typescript/models/ServerError\";\r\nimport { User } from \"typescript/models/User\";\r\nimport { login as UserLogin, register as UserRegister } from \"services/auth.service\"\r\nimport { isAxiosError, removeTokenFromLocalStorage } from \"utils/utilFunctions\";\r\nimport { postProfilePicture } from \"services/user.service\";\r\n\r\n/**\r\n * \r\n * @warning this method has internal error handling\r\n */\r\nexport const login = (user: User) => {\r\n    return createDispatcher<UserActions>(async dispatch => {\r\n        try {\r\n            const req = await UserLogin(user);\r\n            dispatch({\r\n                type: \"USER_LOGIN\",\r\n                user: req.data.user\r\n            });\r\n        } catch (error: any) {\r\n            dispatch({\r\n                type: \"USER_LOGIN_ERROR\",\r\n                error\r\n            });\r\n        }\r\n    })\r\n}\r\n/**\r\n * \r\n * @warning this method has internal error handling\r\n */\r\nexport const register = (user: User) => {\r\n    return createDispatcher<UserActions>(async dispatch => {\r\n        try {\r\n            const req = await UserRegister(user);\r\n            dispatch({\r\n                type: \"USER_REGISTER\",\r\n                user: req.data.user\r\n            });\r\n        } catch (error) {\r\n            if (isAxiosError<ServerError>(error)) {\r\n                const message = error.response!.data.message;\r\n                dispatch({\r\n                    type: \"USER_LOGIN_ERROR\",\r\n                    error: message\r\n                });\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nexport const logoutAction = () => {\r\n    return createDispatcher<UserActions>(async dispatch => {\r\n        removeTokenFromLocalStorage()\r\n        dispatch({\r\n            type: \"USER_LOGOUT\"\r\n        })\r\n    })\r\n}\r\n\r\nexport const uploadUserProfilePicture = (file: File) => {\r\n    return createDispatcher<UserActions>(async dispatch => {\r\n        const request = (await postProfilePicture(file)).data\r\n        dispatch({\r\n            type: \"SET_USER_PROFILE\",\r\n            avatar: request.filename\r\n        })\r\n    })\r\n}","import { getCurrentUser } from \"services/auth.service\";\r\nimport { useDispatch, useSelector } from \"store\";\r\nimport { logoutAction } from \"store/functions/user.functions\";\r\n\r\nexport function useUser() {\r\n    const dispatch = useDispatch();\r\n    const user = useSelector(state => state.userReducer);\r\n\r\n    const logout = () => {\r\n        dispatch(logoutAction())\r\n    }\r\n\r\n    const fetchUser = async () => {\r\n        const req = await getCurrentUser();\r\n        dispatch({\r\n            type: \"SET_USER\",\r\n            user: req.data,\r\n        })\r\n    }\r\n\r\n    return {\r\n        user, logout, fetchUser\r\n    }\r\n\r\n}","import React, { createContext } from \"react\";\r\nimport { useUser } from \"hooks/UserHook\";\r\n\r\n\r\nexport const UserContext = createContext<ReturnType<typeof useUser>>(null!);\r\n\r\nexport const UserContextProvider: React.FC = ({ children }) => {\r\n    const user = useUser();\r\n    return <UserContext.Provider value={user}>\r\n        {children}\r\n    </UserContext.Provider>\r\n\r\n\r\n}","import { useEffect, useState } from \"react\";\r\nimport { useContext } from \"react\";\r\nimport { createContext } from \"react\";\r\nimport { endpointURL } from \"services/config\";\r\nimport { io, Socket } from \"socket.io-client\";\r\nimport { retrieveStorageToken } from \"utils/utilFunctions\";\r\nimport { UserContext } from \"./UserContext\";\r\n\r\nexport const SocketContext = createContext<Socket>(null!);\r\n\r\n\r\nexport const SocketIoContextProvider: React.FC = ({ children }) => {\r\n    const { user, fetchUser } = useContext(UserContext);\r\n    const [socket, setSocket] = useState<Socket>(null!);\r\n    useEffect(() => {\r\n        if (user && !socket) {\r\n            const socket = io(endpointURL!);\r\n            const token = retrieveStorageToken();\r\n            socket.emit('authenticate', token);\r\n            // socket.emit(\"init\", user);\r\n            setSocket(socket);\r\n\r\n            socket.on(user._id, () => {\r\n                fetchUser();\r\n            })\r\n        }\r\n        if (!user && socket && socket.connected) {\r\n            socket.disconnect();\r\n            setSocket(null!);\r\n        }\r\n        return () => {\r\n            if(socket && socket.connected){\r\n                setSocket(null!);\r\n            }\r\n        }\r\n    }, [user, socket, fetchUser]);\r\n    return <SocketContext.Provider value={socket}>\r\n        {children}\r\n    </SocketContext.Provider>\r\n\r\n\r\n}","import React from \"react\";\r\nimport { SocketIoContextProvider } from \"./SocketIoContext\";\r\nimport { UserContextProvider } from \"./UserContext\";\r\n\r\n\r\nconst indexes = [UserContextProvider, SocketIoContextProvider];\r\n\r\n/**\r\n * \r\n * @warning be warned as the item will be consumed after this\r\n */\r\nconst GeneralProvider: React.FC<{ item: React.FC<{}>[] }> = ({ item, children }) => {\r\n    if (!item || item.length === 0) {\r\n        return <React.Fragment>\r\n            {children}\r\n        </React.Fragment>;\r\n    }\r\n    const Item = item.shift()!;\r\n    return <Item>\r\n        <GeneralProvider item={item} >\r\n            {children}\r\n        </GeneralProvider>\r\n    </Item>\r\n}\r\n\r\nconst ContextsProvider: React.FC = ({ children }) => (\r\n    <GeneralProvider item={indexes}>\r\n        {children}\r\n    </GeneralProvider>\r\n)\r\nexport default ContextsProvider;","import { Box, Button, Grid, Link, Paper, TextField, Theme, Typography } from \"@mui/material\";\r\nimport makeStyles from '@mui/styles/makeStyles';\r\nimport { Form, Formik } from \"formik\";\r\nimport { useState } from \"react\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport { register } from \"services/auth.service\";\r\nimport { ServerError } from \"typescript/models/ServerError\";\r\nimport { User } from \"typescript/models/User\";\r\nimport { isAxiosError } from \"utils/utilFunctions\";\r\n\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n    root: {\r\n        height: '100%',\r\n        display: \"grid\",\r\n        placeItems: \"center\"\r\n    },\r\n    image: {\r\n        backgroundImage: `url(${process.env.PUBLIC_URL + \"/roly-poly-bg.jpg\"})`,\r\n        backgroundRepeat: 'no-repeat',\r\n        backgroundColor:\r\n            theme.palette.mode === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\r\n        backgroundSize: 'cover',\r\n        backgroundPosition: 'center',\r\n    },\r\n    submitError: {\r\n        color: theme.palette.error.dark,\r\n        fontSize: \"16px\",\r\n        fontWeight: \"bold\",\r\n        textAlign: \"center\",\r\n    },\r\n    submitSuccess: {\r\n        color: theme.palette.success.dark,\r\n        fontSize: \"16px\",\r\n        fontWeight: \"bold\",\r\n        textAlign: \"center\",\r\n    },\r\n    link: {\r\n        color: \"inherit\",\r\n        \"&:hover\": {\r\n            color: theme.palette.primary.dark,\r\n        }\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(4),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n}));\r\nconst SignUp = () => {\r\n    const classes = useStyles();\r\n    const [submited, setSubmited] = useState(false);\r\n    return <Box className={classes.root}>\r\n        <Helmet\r\n            title=\"Register\"\r\n        />\r\n        <Paper className={classes.paper}>\r\n            <Typography component=\"h1\" variant=\"h5\">\r\n                Sign Up\r\n            </Typography>\r\n            <Formik<User & { submit?: string }>\r\n                initialValues={{\r\n                    first_name: \"\",\r\n                    last_name: \"\",\r\n                    password: \"\",\r\n                    email: \"\",\r\n                    submit: \"\",\r\n                    chatRooms: [],\r\n                    friends: [],\r\n                    friendRequests: []\r\n                }}\r\n                onSubmit={async (values, { setErrors }) => {\r\n                    try {\r\n                        await register(values);\r\n                        setSubmited(true);\r\n                    } catch (error) {\r\n                        if (isAxiosError<ServerError>(error)) {\r\n                            const message = error.response!.data.message;\r\n                            console.log(message);\r\n                            if (typeof (message) === \"string\") {\r\n                                setErrors({ submit: message });\r\n                            } else {\r\n                                setErrors(message);\r\n                                // console.log(\"Custom error\")\r\n                            }\r\n                        }\r\n                    }\r\n                }}\r\n            >\r\n                {({ handleChange, errors, isSubmitting }) => {\r\n                    return <Form>\r\n                        <Grid container spacing={2}>\r\n                            <Grid item xs={12} sm={6}>\r\n                                <TextField label=\"First Name\" required fullWidth name=\"first_name\" onChange={handleChange} />\r\n                            </Grid>\r\n                            <Grid item xs={12} sm={6}>\r\n                                <TextField label=\"Last Name\" required fullWidth name=\"last_name\" onChange={handleChange} />\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n\r\n                                <TextField label=\"Email\" error={!!errors.email} helperText={errors.email} name=\"email\" type=\"email\" required fullWidth onChange={handleChange} />\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                                <TextField label=\"Password\" error={!!errors.password} helperText={errors.password} name=\"password\" type=\"password\" required fullWidth onChange={handleChange} />\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                                <Button disabled={isSubmitting} color=\"primary\" type=\"submit\" variant=\"contained\" fullWidth>\r\n                                    Sign Up\r\n                                </Button>\r\n                            </Grid>\r\n                            <Grid item container justifyContent=\"center\">\r\n                                <Typography variant=\"h6\" className={classes.submitError}>{errors.submit}</Typography>\r\n                            </Grid>\r\n                            <Grid item container justifyContent=\"center\">\r\n                                {submited && <Typography variant=\"h6\" className={classes.submitSuccess}>\r\n                                    Your account has been created, you can now&nbsp;\r\n                                    <Link to=\"/login\" component={RouterLink} className={classes.link}>\r\n                                        Login\r\n                                    </Link>&nbsp;into your account\r\n                                </Typography>}\r\n                            </Grid>\r\n                            <Grid item container justifyContent=\"flex-end\">\r\n                                <Grid item>\r\n                                    <Link to=\"/login\" component={RouterLink} variant=\"body2\">\r\n                                        Already have an account? Sign in\r\n                                    </Link>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Form>\r\n                }}\r\n            </Formik>\r\n        </Paper>\r\n    </Box>\r\n}\r\nexport default SignUp","import React from \"react\"\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { useSelector } from \"store\";\r\nexport const AuthGuard: React.FC = ({ children }) => {\r\n    const user = useSelector(state => state.userReducer);\r\n    if (!user) {\r\n        return <Redirect to=\"/login\" />\r\n    }\r\n    return <React.Fragment>\r\n        {children}\r\n    </React.Fragment>;\r\n}","import { Helmet } from \"react-helmet-async\"\r\nimport { Form, Formik } from \"formik\";\r\nimport { Box, Button, Grid, Link, Paper, TextField, Theme, Typography } from \"@mui/material\";\r\nimport makeStyles from '@mui/styles/makeStyles';\r\nimport { login, } from \"services/auth.service\";\r\nimport { isAxiosError, storeToken } from \"utils/utilFunctions\";\r\nimport { ServerError } from \"typescript/models/ServerError\";\r\n\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { useDispatch } from \"store\";\r\nimport { urls, useRouting } from \"routes\";\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n    root: {\r\n        height: '100%',\r\n    },\r\n    image: {\r\n        backgroundImage: `url(${process.env.PUBLIC_URL + \"/roly-poly-bg.jpg\"})`,\r\n        backgroundRepeat: 'no-repeat',\r\n        backgroundColor:\r\n            theme.palette.mode === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\r\n        backgroundSize: 'cover',\r\n        backgroundPosition: 'center',\r\n    },\r\n    paper: {\r\n        margin: theme.spacing(8, 4),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    submitError: {\r\n        color: theme.palette.error.dark,\r\n        fontSize: \"16px\",\r\n        fontWeight: \"bold\",\r\n        textAlign: \"center\",\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n}));\r\n\r\nconst SignIn = () => {\r\n    const dispatch = useDispatch();\r\n    const classes = useStyles();\r\n    const { routeTo } = useRouting();\r\n    return <Grid container component=\"main\" className={classes.root}>\r\n        <Helmet\r\n            title=\"Login\"\r\n        />\r\n        <Grid item xs={false} sm={4} md={7} className={classes.image} />\r\n        <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\r\n            <div className={classes.paper}>\r\n                <Typography component=\"h1\" variant=\"h5\">\r\n                    Sign in\r\n                </Typography>\r\n                <Formik<{\r\n                    email: string;\r\n                    password: string;\r\n                    submit?: string\r\n                }>\r\n                    initialValues={{\r\n                        password: \"\",\r\n                        email: \"\",\r\n                        submit: \"\"\r\n                    }}\r\n                    onSubmit={async (values, { setErrors }) => {\r\n                        try {\r\n                            const req = await login(values);\r\n                            const { user, token } = req.data;\r\n                            dispatch({\r\n                                type: \"SET_USER\",\r\n                                user: user\r\n                            });\r\n                            storeToken(token)\r\n                            routeTo(urls.dashboard);\r\n                        } catch (error) {\r\n                            if (isAxiosError<ServerError>(error)) {\r\n                                const message = error.response!.data.message;\r\n                                setErrors({ submit: message } as any);\r\n                            }\r\n                        }\r\n                    }}\r\n                >\r\n                    {({ values, handleChange, errors }) => {\r\n                        return <Form className={classes.form}>\r\n                            <TextField\r\n                                variant=\"outlined\"\r\n                                margin=\"normal\"\r\n                                required\r\n                                fullWidth\r\n                                id=\"email\"\r\n                                value={values.email}\r\n                                onChange={handleChange}\r\n                                label=\"Email Address\"\r\n                                name=\"email\"\r\n                                autoComplete=\"email\"\r\n                                autoFocus\r\n                            />\r\n                            <TextField\r\n                                variant=\"outlined\"\r\n                                margin=\"normal\"\r\n                                required\r\n                                fullWidth\r\n                                value={values.password}\r\n                                onChange={handleChange}\r\n                                name=\"password\"\r\n                                label=\"Password\"\r\n                                type=\"password\"\r\n                                id=\"password\"\r\n                                autoComplete=\"current-password\"\r\n                            />\r\n                            <Button\r\n                                type=\"submit\"\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                className={classes.submit}\r\n                            >\r\n                                Sign In\r\n                            </Button>\r\n                            <Box my={2} className={classes.submitError}>\r\n                                {errors.submit}\r\n                            </Box>\r\n                            <Grid container>\r\n                                <Grid item xs>\r\n                                    <Link to=\"/forgot-password\" component={RouterLink} variant=\"body2\">\r\n                                        Forgot password?\r\n                                    </Link>\r\n                                </Grid>\r\n                                <Grid item>\r\n                                    <Link to=\"/register\" component={RouterLink} variant=\"body2\">\r\n                                        {\"Don't have an account? Sign Up\"}\r\n                                    </Link>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Form>\r\n                    }}\r\n                </Formik>\r\n            </div>\r\n        </Grid>\r\n    </Grid>\r\n}\r\nexport default SignIn;","import { useState } from \"react\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport { Wheel } from 'react-custom-roulette'\r\nimport { Fab, Typography } from \"@mui/material\";\r\nimport { useElementHeight } from \"hooks/useElementHeight\"\r\nconst data = [\r\n    {\r\n        option: '1$'\r\n    },\r\n    {\r\n        option: '5$'\r\n    },\r\n    {\r\n        option: '10$'\r\n    },\r\n    {\r\n        option: \"25$\"\r\n    },\r\n    {\r\n        option: \"100$\"\r\n    },\r\n    {\r\n        option: \"1.000.000 $\"\r\n    }\r\n];\r\n\r\nfunction randn_bm(min: number, max: number, skew: number) {\r\n    let u = 0, v = 0;\r\n    while (u === 0) u = Math.random() //Converting [0,1) to (0,1)\r\n    while (v === 0) v = Math.random()\r\n    let num = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v)\r\n\r\n    num = num / 10.0 + 0.5 // Translate to 0 -> 1\r\n    if (num > 1 || num < 0)\r\n        num = randn_bm(min, max, skew) // resample between 0 and 1 if out of range\r\n\r\n    else {\r\n        num = Math.pow(num, skew) // Skew\r\n        num *= max - min // Stretch to fill range\r\n        num += min // offset to min\r\n    }\r\n    return num\r\n}\r\nconst innerRadius = 20\r\nconst Dashboard = () => {\r\n    const [mustSpin, setMustSpin] = useState(false);\r\n    const [prizeNumber, setPrizeNumber] = useState(0);\r\n    const [containerLoaded, setContainerLoaded] = useState(false);\r\n    // const [fabHeight, setFabHeight] = useState<number>(0);\r\n    const [showRewards, setShowRewards] = useState(false);\r\n\r\n    const handleSpinClick = () => {\r\n        setShowRewards(false);\r\n        const newPrizeNumber = Math.floor(randn_bm(0, 1, 0.9) * data.length)\r\n        setPrizeNumber(newPrizeNumber)\r\n        setMustSpin(true)\r\n    }\r\n\r\n    const { height: spinnerHeight } = useElementHeight({\r\n        elemId: \"spinner-container\",\r\n        onResize: true,\r\n    }, [containerLoaded])\r\n    return <div style={{ height: \"100%\" }}>\r\n        <Helmet\r\n            title=\"Dashboard\"\r\n        />\r\n        <div style={{\r\n            display: \"grid\",\r\n            placeItems: \"center\",\r\n        }}>\r\n\r\n            <div onLoad={() => {\r\n                setContainerLoaded(true)\r\n            }} id=\"spinner-container\" style={{\r\n                position: \"relative\",\r\n            }}>\r\n                <div style={{\r\n                    position: \"absolute\",\r\n                    left: \"50%\",\r\n                    top: \"49.9%\",\r\n                    zIndex: 1000,\r\n                    transform: \"translate(-50%,-50%)\",\r\n                }}>\r\n                    <Fab\r\n                        onClick={handleSpinClick}\r\n                        disabled={mustSpin}\r\n                        color=\"primary\" sx={{\r\n                            // backgroundColor: \"#df3428\",\r\n                            width: (innerRadius * spinnerHeight) / 100,\r\n                            height: (innerRadius * spinnerHeight) / 100\r\n                        }}\r\n                    >\r\n                        SPIN\r\n                    </Fab>\r\n                </div>\r\n                <Wheel\r\n                    mustStartSpinning={mustSpin}\r\n                    prizeNumber={prizeNumber}\r\n                    data={data}\r\n                    onStopSpinning={() => {\r\n                        setMustSpin(false);\r\n                        setShowRewards(true);\r\n                    }}\r\n                    outerBorderWidth={10}\r\n                    radiusLineWidth={8}\r\n                    // textDistance={60}\r\n                    // fontSize={17}\r\n                    innerRadius={innerRadius}\r\n                    innerBorderWidth={10}\r\n                    backgroundColors={['#3e3e3e', '#df3428']}\r\n                    textColors={['#ffffff']}\r\n                />\r\n            </div>\r\n            {/* <button onClick={handleSpinClick}>SPIN</button> */}\r\n            {showRewards && <div>\r\n                <Typography variant=\"h4\" sx={{ fontWeight: \"bold\" }}>\r\n                    Current Prize:  <span style={{ color: \"#df3428\" }}>{data[prizeNumber].option}</span>\r\n                </Typography>\r\n            </div>}\r\n        </div>\r\n    </div>\r\n}\r\nexport default Dashboard\r\n","import { Theme, useMediaQuery } from \"@mui/material\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport const useElementHeight = ({\r\n    elemId,\r\n    onResize\r\n}: {\r\n    onResize?: boolean;\r\n    elemId: string\r\n}, deps: any[] = []) => {\r\n    const sm = useMediaQuery<Theme>(theme => theme.breakpoints.down('sm'));\r\n    const [height, setHeight] = useState(0);\r\n    const [width, setWidth] = useState(0);\r\n    const fn = () => {\r\n        const element = document.getElementById(elemId);\r\n        if (element) {\r\n            const height = element.clientHeight\r\n            const width = element.clientWidth\r\n            setWidth(width)\r\n            setHeight(height)\r\n        }\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        if (onResize)\r\n            window.addEventListener(\"resize\", fn)\r\n        return () => {\r\n            window.removeEventListener(\"resize\", fn);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n    useEffect(() => {\r\n        fn();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [sm, elemId, ...deps]);\r\n    return { height, width }\r\n}","import { useEffect, useState } from \"react\"\r\n\r\ntype fnSignature = (() => any) | (() => Promise<any>)\r\n\r\nfunction isPromise(obj: any): obj is Promise<any> {\r\n    return typeof obj === \"object\" && \"then\" in obj;\r\n}\r\n\r\nexport const useEffectAsync = (fn: fnSignature, deps: any[] = []) => {\r\n    const [error, setError] = useState<any>(null);\r\n    useEffect(() => {\r\n        let cleanup = () => { };\r\n        try {\r\n            const fnResult = fn();\r\n            if (fnResult) {\r\n                if (isPromise(fnResult)) {\r\n                    fnResult.then(cb => {\r\n                        cleanup = cb;\r\n                    }).catch(err => {\r\n                        setError(err);\r\n                    });\r\n                } else {\r\n                    if (typeof fnResult === \"function\")\r\n                        cleanup = fnResult;\r\n                }\r\n            }\r\n        } catch (e) {\r\n            console.log({ e });\r\n            setError(e);\r\n        }\r\n\r\n        return cleanup;\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, deps)\r\n    return {\r\n        error\r\n    }\r\n}","import { Avatar, Box, Button, Theme, Typography } from \"@mui/material\";\r\nimport makeStyles from '@mui/styles/makeStyles';\r\nimport { useEffectAsync } from \"hooks/useEffecyAsync\";\r\nimport { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport { RouteComponentProps } from \"react-router\"\r\nimport { urls, useRouting } from \"routes\";\r\nimport { endpointURL } from \"services/config\";\r\nimport { acceptFriendRequest, getUserById, rejectFriendRequest, sendFriendRequest, unfriend } from \"services/user.service\";\r\nimport { FullUser } from \"typescript/models/User\";\r\nimport { getAverageRGB } from \"utils/utilFunctions\";\r\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\r\nimport { useDispatch } from \"store\";\r\nimport { uploadUserProfilePicture } from \"store/functions/user.functions\";\r\nimport { UserContext } from \"contexts/UserContext\";\r\nimport { SocketContext } from \"contexts/SocketIoContext\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n    root: {\r\n        height: \"100%\",\r\n    },\r\n    centrate: {\r\n        display: \"grid\",\r\n        placeItems: \"center\",\r\n        height: \"100%\"\r\n    },\r\n    default: {\r\n        background: theme.palette.primary.light,\r\n    },\r\n    avatarContainer: {\r\n        display: \"flex\",\r\n        // alignItems: \"flex-end\",\r\n        justifyContent: \"center\"\r\n    },\r\n    linkButton: {\r\n        textTransform: \"none\"\r\n    }\r\n}))\r\n\r\nconst UserProfile = (p: RouteComponentProps<{ userId: string }>) => {\r\n    const { user: loggedUser } = useContext(UserContext);\r\n    const socket = useContext(SocketContext);\r\n    const { routeTo, history, } = useRouting();\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n    const [user, setUser] = useState<FullUser | null>(null);\r\n\r\n    const [backgroundRgb, setbackgroundRgb] = useState<{\r\n        r: number; g: number; b: number\r\n    } | null>(null!)\r\n\r\n\r\n    const isMyProfile = user?._id === loggedUser._id;\r\n\r\n    const userId = p.match.params.userId;\r\n\r\n    const isFriend = loggedUser.friends.includes(userId) && user?.friends.includes(loggedUser._id);\r\n    const hasRequestFriend = user?.friendRequests.includes(loggedUser._id);\r\n    const hasPendingFriendRequest = loggedUser.friendRequests.includes(user?._id ?? \"\");\r\n    const { error } = useEffectAsync(async () => {\r\n        const response = await getUserById(userId);\r\n        setUser(response.data);\r\n    }, [userId]);\r\n\r\n    const fetchUser = useCallback(async () => {\r\n        const response = await getUserById(userId);\r\n        setUser(response.data);\r\n    }, [userId]);\r\n\r\n    useEffect(() => {\r\n        const payload = {\r\n            id: userId\r\n        }\r\n        socket.emit(\"join room\", payload)\r\n        socket.on(userId, () => {\r\n            fetchUser();\r\n        });\r\n        return () => {\r\n            socket.emit(\"leave room\", payload);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [userId]);\r\n\r\n    const handleCapture = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files) {\r\n            const file = e.target.files[0];\r\n            dispatch(async dp => {\r\n                //shut up , i know what i'm doing\r\n                await uploadUserProfilePicture(file)(dp);\r\n                const response = await getUserById(userId);\r\n                setUser(response.data);\r\n\r\n            });\r\n        }\r\n    };\r\n    const sendFriendRequestHandler = async () => {\r\n        await sendFriendRequest(user?._id!);\r\n        fetchUser();\r\n    }\r\n\r\n    const handleNavBack = () => {\r\n        history.goBack();\r\n    }\r\n\r\n    return <div className={classes.root}>\r\n        <Helmet\r\n            title={user ? `${user.first_name} ${user.last_name}` : \"\"}\r\n        />\r\n\r\n        {user && <div>\r\n            <div className={`${classes.avatarContainer} ${classes.default}`} style={{\r\n                height: \"300px\",\r\n                position: \"relative\",\r\n                background: backgroundRgb ? `rgb(${backgroundRgb.r},${backgroundRgb.g},${backgroundRgb.b})` : \"\",\r\n                borderRadius: \"0px 0px 80px 80px\",\r\n                marginBottom: \"calc(75px + 25px)\"\r\n            }}>\r\n                <Avatar\r\n                    style={{\r\n                        width: \"150px\",\r\n                        height: \"150px\",\r\n                        boxShadow: \"0 0 0pt 4pt white\",\r\n                        position: \"absolute\",\r\n                        top: \"225px\"\r\n                    }}\r\n                    imgProps={{\r\n                        crossOrigin: \"\",\r\n                        onLoad: event => {\r\n                            const rgb = getAverageRGB(event.target as any);\r\n                            setbackgroundRgb(rgb);\r\n                        }\r\n                    }}\r\n                    src={`${endpointURL}/file/${user.avatar}`}\r\n                >\r\n\r\n                </Avatar>\r\n            </div>\r\n            <div className={classes.avatarContainer}>\r\n                <Typography component=\"div\" variant=\"h2\">\r\n                    <Box fontWeight=\"fontWeightBold\">\r\n                        {user.first_name} {user.last_name}\r\n                    </Box>\r\n                </Typography>\r\n            </div>\r\n            {!isMyProfile && <div className={classes.avatarContainer}>\r\n                {!isFriend && <div>\r\n                    {hasRequestFriend ? <div>\r\n                        You sent a request to {user.first_name}, wait for him to respond :)\r\n\r\n                    </div> : hasPendingFriendRequest ? <div>\r\n                        {user.first_name} {user.last_name} has sent you a friend request\r\n                        <Box sx={{\r\n                            display: \"flex\"\r\n                        }}>\r\n                            <Button color=\"secondary\" variant=\"contained\" onClick={async () => {\r\n                                await acceptFriendRequest(user._id);\r\n                                fetchUser();\r\n                            }}>Accept</Button>\r\n                            <div style={{ flexGrow: 1 }}></div>\r\n                            <Button color=\"secondary\" variant=\"contained\" sx={{\r\n                                backgroundColor: \"gray\",\r\n                                \"&:hover\": {\r\n                                    backgroundColor: \"darkgray\",\r\n\r\n                                }\r\n                            }} onClick={async () => {\r\n                                await rejectFriendRequest(userId);\r\n                                // fetchUser();\r\n                            }}>Decline</Button>\r\n                        </Box>\r\n                    </div> : <div>\r\n                        You are not friend with {user.first_name}\r\n                        <Button color=\"primary\" variant=\"contained\" onClick={sendFriendRequestHandler}>\r\n                            Send a friend request\r\n                        </Button>\r\n                    </div>}\r\n                </div>}\r\n                {isFriend && <div style={{\r\n                    display: \"flex\",\r\n                    flexDirection: \"column\"\r\n                }}>\r\n                    <Box>\r\n                        {user.first_name} {user.last_name} is your friend :)\r\n                    </Box>\r\n                    <Button color=\"primary\" variant=\"contained\" onClick={() => {\r\n                        unfriend(userId);\r\n                    }}>\r\n                        Unfriend\r\n                    </Button>\r\n                </div>}\r\n            </div>}\r\n            {isMyProfile && <>\r\n                <div className={classes.avatarContainer}>\r\n                    You can upload your picture here, not the greatest solution but what can you do\r\n                </div>\r\n                <div className={classes.avatarContainer}>\r\n                    <input\r\n                        accept=\"image/*\"\r\n                        style={{ display: \"none\" }}\r\n                        id=\"raised-button-file\"\r\n                        onChange={handleCapture}\r\n                        type=\"file\"\r\n                    />\r\n                    <label htmlFor=\"raised-button-file\">\r\n                        <Button color=\"primary\" variant=\"contained\" component=\"span\">\r\n                            Upload profile picture\r\n                            <CloudUploadIcon style={{ marginLeft: \"5px\" }} />\r\n                        </Button>\r\n                    </label>\r\n                </div>\r\n            </>}\r\n        </div>\r\n        }\r\n        {\r\n            error && <div className={classes.centrate}>\r\n                <div>\r\n                    <Typography component=\"div\" variant=\"h4\">\r\n                        <Box fontWeight=\"fontWeightBold\" textAlign=\"center\">\r\n                            This user does not exist\r\n                        </Box>\r\n                    </Typography>\r\n                    <Typography component=\"div\" variant=\"h5\">\r\n                        <Box textAlign=\"center\" my={2}>\r\n                            Check if the url you've accessed is correct\r\n                        </Box>\r\n                    </Typography>\r\n                    <Box textAlign=\"center\" my={2}>\r\n                        <Button onClick={() => routeTo(urls.dashboard)} color=\"primary\" className={classes.linkButton} variant=\"contained\">\r\n                            To Dashboard\r\n                        </Button>\r\n                    </Box>\r\n                    <Box textAlign=\"center\" my={2}>\r\n                        <Button color=\"primary\" className={classes.linkButton} onClick={handleNavBack} variant=\"text\">\r\n                            Go Back\r\n                        </Button>\r\n                    </Box>\r\n                </div>\r\n            </div>\r\n        }\r\n    </div >\r\n}\r\n\r\nexport default UserProfile","import axios from \"utils/axios\";\r\nimport { headers } from \"./config\";\r\n\r\nexport const putFile = (file: File) => {\r\n    const data = new FormData();\r\n    data.append(\"file\", file);\r\n    return axios.put<{\r\n        url: string;\r\n        filename: string;\r\n    }>(\"/file/\", data, { headers });\r\n}","import { Avatar, Badge, Box, Button, ClickAwayListener, Fab, Grid, List, ListItem, ListItemIcon, ListItemText, Popper, styled, TextField, Theme, Typography, useMediaQuery } from \"@mui/material\";\r\nimport { SocketContext } from \"contexts/SocketIoContext\";\r\nimport { UserContext } from \"contexts/UserContext\";\r\nimport { Form, Formik } from \"formik\";\r\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { endpointURL } from \"services/config\";\r\nimport { FullUser } from \"typescript/models/User\";\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport Picker, { IEmojiData, SKIN_TONE_MEDIUM_DARK } from \"emoji-picker-react\";\r\n\r\nimport EmojiEmotionsIcon from '@mui/icons-material/EmojiEmotions';\r\nimport { getImageOrFallback, validURL } from \"utils/utilFunctions\";\r\nimport { useEffectAsync } from \"hooks/useEffecyAsync\";\r\nimport { putFile } from \"services/file.service\";\r\nimport { urls, useRouting } from \"routes\";\r\nimport { searchUsersInIds } from \"services/user.service\";\r\nimport { searchRoomsInIds } from \"services/chatRoom.service\";\r\n\r\n\r\nconst AvatarBox = styled(Avatar)(({ theme }) => ({\r\n    position: \"relative\",\r\n    display: \"inline-flex\",\r\n    width: \"34px\",\r\n    height: \"34px\",\r\n    marginRight: theme.spacing(1),\r\n    marginLeft: theme.spacing(1),\r\n    cursor: \"pointer\",\r\n}))\r\nconst ChatBubbleContainer = styled(\"div\")<{ highlighted: boolean }>(({ theme, highlighted }) => ({\r\n    display: \"inline-block\",\r\n    marginRight: \"auto\",\r\n    borderRadius: \"3px\",\r\n    padding: \"8px\",\r\n    marginBottom: \"4px\",\r\n    background: highlighted ? theme.palette.secondary.main : theme.palette.action.hover,\r\n    color: highlighted ? theme.palette.common.white : theme.palette.text.primary\r\n}))\r\n\r\nconst ChatSidebar = styled(Grid)(({ theme }) => ({\r\n    borderRight: `1px solid ${theme.palette.divider}`,\r\n}))\r\nconst ChatTextfield = styled(Grid)(({ theme }) => ({\r\n    padding: theme.spacing(5)\r\n}));\r\n\r\n\r\ntype ChatMessageComponentType = {\r\n    name: string;\r\n    message: string;\r\n    user: FullUser;\r\n    // time: string;\r\n    avatar: string;\r\n    position: \"left\" | \"right\";\r\n    routeTo?: {\r\n        (fn: () => string): void;\r\n        <T>(fn: (p: T) => string, params: T): void;\r\n    }\r\n};\r\nfunction ChatMessageComponent({\r\n    name,\r\n    message,\r\n    // time,\r\n    user,\r\n    avatar,\r\n    position = \"left\",\r\n    routeTo\r\n}: ChatMessageComponentType) {\r\n    const highlighted = position === \"right\"\r\n\r\n    // ^ should start with an emoji and should end with an emoji ($) and have as many emojis (*)\r\n    const isEmoji = /^\\p{Emoji}*$/u.test(message);\r\n    const [isImage, setIsImage] = useState(false);\r\n    useEffectAsync(async () => {\r\n        try {\r\n            await getImageOrFallback(message)\r\n            setIsImage(true);\r\n        } catch (e) { }\r\n    }, []);\r\n\r\n\r\n    const avatarBox = <AvatarBox onClick={() => {\r\n        routeTo && routeTo(urls.userProfile, { userId: user._id });\r\n    }} alt={name} src={avatar} >{user.first_name[0] + user.last_name[0]}</AvatarBox>\r\n    const bubble = <ChatBubbleContainer highlighted={highlighted.toString() as any}>\r\n        <Box>\r\n            <Typography variant=\"body1\">\r\n                {name}\r\n            </Typography>\r\n        </Box>\r\n        {isImage ? <div style={{\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n        }}>\r\n            <img alt=\"\" style={{\r\n                height: \"100%\",\r\n                width: \"100%\",\r\n                objectFit: \"cover\"\r\n            }} src={message}></img>\r\n        </div> : <Typography style={{ minWidth: \"50px\", fontSize: `${isEmoji ? \"40px\" : \"\"}` }}>\r\n            {message.split(\" \").map((singleWord, i) => {\r\n                if (validURL(singleWord)) {\r\n                    return <a key={Date.now() + \"anchor\"} href={singleWord} target=\"_blank\" rel=\"noreferrer\">{singleWord}&nbsp;</a>\r\n                }\r\n                return <React.Fragment key={Date.now() + \" fragment\" + singleWord + i}>\r\n                    {singleWord}\r\n                    &nbsp;\r\n                </React.Fragment>\r\n            })}\r\n        </Typography>}\r\n\r\n    </ChatBubbleContainer>\r\n\r\n    return (\r\n        <div style={{\r\n            margin: \"30px\",\r\n            textAlign: position\r\n        }}>\r\n            <div style={{\r\n                display: \"inline-block\"\r\n                // display:\"flex\"\r\n            }}>\r\n                {/* TODO this is a quick fix to rotate the avatar based on direction , change this later */}\r\n                {highlighted ? <>\r\n                    {bubble}\r\n                    {avatarBox}\r\n                </> : <>\r\n                    {avatarBox}\r\n                    {bubble}\r\n                </>}\r\n                {/* <ChatMessageTime variant=\"body2\">{time}</ChatMessageTime> */}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// const MAX_TYPING_COUNT = 3;\r\n\r\nconst Messenger = () => {\r\n    const { user } = useContext(UserContext)\r\n    const socket = useContext(SocketContext);\r\n    // const classes = dashboardStyles();\r\n    const [connectedRoom, setConnectedRoom] = useState(\"general\");\r\n    const [chatRooms, setChatRooms] = useState<any[]>([]);\r\n    const [presentUsers, setPresentUsers] = useState<FullUser[]>([]);\r\n    useEffectAsync(async () => {\r\n        if (user.chatRooms.length > 0) {\r\n            const rooms = await searchRoomsInIds(user.chatRooms)\r\n            setChatRooms(rooms.data);\r\n        } else {\r\n            setChatRooms([]);\r\n        }\r\n        // const users = await searchUsersInIds(user.friends);\r\n        // setFriends(users.data);\r\n    }, [user]);\r\n    useEffectAsync(async () => {\r\n        const members = chatRooms.map(room => room.members).flat();\r\n        const uniqueMembers = [...new Set(members)];\r\n        const users = await searchUsersInIds(uniqueMembers);\r\n        setPresentUsers(users.data);\r\n    }, [chatRooms]);\r\n    useEffect(() => {\r\n        // setMessageList([]);\r\n        console.log({ connectedRoom });\r\n    }, [connectedRoom]);\r\n    const { routeTo } = useRouting();\r\n    const timeout = useRef<NodeJS.Timeout>(null!);\r\n    const typing = useRef<boolean>(false);\r\n\r\n    const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n    const inputeRef = useRef<HTMLInputElement>(null!);\r\n    const containerRef = useRef<HTMLDivElement>(null!);\r\n\r\n    const [message, setMessage] = useState(\"\");\r\n    const [messageList, setMessageList] = useState<{\r\n        text: string;\r\n        user: FullUser;\r\n        room: string;\r\n    }[]>([]);\r\n\r\n    // TODO this is not great, as it's hard to scale if needed to add more data\r\n    // maybe merge the data somehow?\r\n    const [, setUsersTyping] = useState<FullUser[]>([]);\r\n\r\n\r\n    useEffect(() => {\r\n        socket.on(\"message\", (message) => {\r\n            setMessageList(messageList => [...messageList, message]);\r\n        });\r\n        socket.on(\"typing\", ({ user }) => {\r\n            setUsersTyping(users => [...users, user])\r\n        })\r\n        socket.on(\"stop typing\", ({ user }) => {\r\n            setUsersTyping(users => {\r\n                return users.filter(u => user._id !== u._id)\r\n            })\r\n        })\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n    useEffect(() => {\r\n        if (containerRef.current) {\r\n            containerRef.current.scrollTop = containerRef.current.scrollHeight//(containerRef.current.scrollHeight)\r\n        }\r\n    }, [messageList]);\r\n\r\n    const onSendMessage = () => {\r\n        // setMessageList([...messageList, message]);\r\n        socket.emit(\"message\", {\r\n            content: message,\r\n            room: connectedRoom\r\n        });\r\n        setMessage(\"\");\r\n    }\r\n    const onEmojiClick = (event: React.MouseEvent, emojiObject: IEmojiData) => {\r\n        setMessage(message + emojiObject.emoji);\r\n        inputeRef.current.focus()\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const handleCapture = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files) {\r\n            const file = e.target.files[0];\r\n            const request = (await putFile(file)).data;\r\n            socket.emit(\"message\", {\r\n                content: request.url,\r\n                room: connectedRoom\r\n            });\r\n            setMessage(\"\");\r\n        }\r\n    };\r\n\r\n    const togglePopper = (event: React.MouseEvent<HTMLElement>) => {\r\n        setAnchorEl(anchorEl ? null : event.currentTarget);\r\n    };\r\n\r\n    const md = useMediaQuery((theme: Theme) => theme.breakpoints.down('lg'))\r\n    return <Grid container style={{\r\n        height: \"100%\",\r\n        background: \"linear-gradient(0deg, rgba(255,255,255,1) 0%, rgba(123,175,153,1) 100%)\"\r\n    }}>\r\n        <ChatSidebar item xs={12} md={4} lg={3}>\r\n            <List style={{\r\n            }}>\r\n                <ListItem button onClick={() => setConnectedRoom(\"general\")}>\r\n                    <ListItemIcon>\r\n                        <Badge\r\n                            overlap=\"circular\"\r\n                            anchorOrigin={{\r\n                                vertical: \"bottom\",\r\n                                horizontal: \"right\",\r\n                            }}\r\n                            variant=\"dot\"\r\n                        >\r\n                            <Avatar\r\n                                alt=\"General\"\r\n                            />\r\n                        </Badge>\r\n                    </ListItemIcon>\r\n                    <ListItemText primary={\"General\"} secondary=\"Click to write in General\" />\r\n                </ListItem>\r\n                {chatRooms.map(room => {\r\n                    const currentUser = presentUsers.filter(u => u._id !== user._id).find(el => el.chatRooms.includes(room._id))!;\r\n                    return <ListItem button key={room._id} onClick={() => {\r\n                        setConnectedRoom(room._id);\r\n                    }}>\r\n                        <ListItemIcon>\r\n                            <Badge\r\n                            // overlap=\"circular\"\r\n                            // anchorOrigin={{\r\n                            //     vertical: \"bottom\",\r\n                            //     horizontal: \"right\",\r\n                            // }}\r\n                            // variant=\"dot\"\r\n                            >\r\n                                <Avatar\r\n                                    onClick={(e) => {\r\n                                        e.stopPropagation()\r\n                                        routeTo(urls.userProfile, { userId: currentUser._id });\r\n                                    }}\r\n                                    alt={`${currentUser?.first_name} ${currentUser?.last_name}`}\r\n                                    src={`${endpointURL}/file/${currentUser?.avatar}`}\r\n                                />\r\n                            </Badge>\r\n                        </ListItemIcon>\r\n                        <ListItemText primary={room.members.length > 2 ? \"Group Chat\" : `${currentUser?.first_name} ${currentUser?.last_name}`} secondary=\"Contact Me!\" />\r\n                    </ListItem>\r\n                })}\r\n            </List>\r\n        </ChatSidebar>\r\n        <Grid style={{\r\n        }} item xs={12} md={8} lg={9}>\r\n            <div ref={containerRef} style={{\r\n                height: \"calc(100vh - 200px)\",\r\n                overflowY: \"auto\",\r\n            }}>\r\n                <Box sx={{\r\n                    p: 2\r\n                }}>\r\n                    Talking with {presentUsers.filter(u => u._id !== user._id).find(user => user.chatRooms.includes(connectedRoom))?.first_name ?? `${connectedRoom}`}\r\n                </Box>\r\n                {messageList.filter(msg => msg.room === connectedRoom).map((message, i) => {\r\n                    const isMessageOwner = message.user._id === user._id\r\n                    return <ChatMessageComponent\r\n                        key={message.text + message.user + new Date().getTime() + i}\r\n                        avatar={user.avatar ? `${endpointURL}/file/${message.user.avatar}` : \"\"}\r\n                        user={message.user}\r\n                        message={message.text}\r\n                        name={isMessageOwner ? \"You\" : message.user.first_name}\r\n                        position={isMessageOwner ? \"right\" : \"left\"}\r\n                        routeTo={routeTo}\r\n                    />\r\n                })}\r\n                <div>\r\n\r\n                </div>\r\n                {messageList.length === 0 && <div>\r\n                    <Typography variant=\"body2\">\r\n                        No messages, type your first message ...\r\n                    </Typography>\r\n                </div>}\r\n            </div>\r\n            {/* <div style={{\r\n                position: \"absolute\",\r\n                paddingLeft: \"50px\",\r\n                display: usersTyping.length > 0 ? \"initial\" : \"none\"\r\n            }}>\r\n                <Typography variant=\"caption\">\r\n                    {usersTyping.map(u => u.first_name).slice(0, MAX_TYPING_COUNT).join(\",\")}\r\n                    {usersTyping.length > MAX_TYPING_COUNT ? ` and ${usersTyping.length - MAX_TYPING_COUNT} others` : \"\"}\r\n                    {usersTyping.length === 1 ? \" is \" : \" are \"}\r\n                    typing something ...\r\n                </Typography>\r\n            </div> */}\r\n            <ChatTextfield container>\r\n                <Formik\r\n                    initialValues={{\r\n                        message\r\n                    }}\r\n                    enableReinitialize={true}\r\n                    onSubmit={() => {\r\n                        onSendMessage();\r\n                    }}\r\n                >\r\n                    {({ values }) => {\r\n                        return <Form style={{ display: \"flex\", width: \"100%\" }}>\r\n                            <Grid item>\r\n                                <Box mr={2}>\r\n                                    <div>\r\n                                        <input\r\n                                            accept=\"image/*\"\r\n                                            style={{ display: \"none\" }}\r\n                                            id=\"raised-button-file\"\r\n                                            onChange={handleCapture}\r\n                                            type=\"file\"\r\n                                        />\r\n                                        <label htmlFor=\"raised-button-file\">\r\n                                            {md ? <span>\r\n                                                <Fab component=\"span\" color=\"primary\" aria-label=\"add\" size=\"small\">\r\n                                                    <AddIcon />\r\n                                                </Fab>\r\n                                            </span> : <Button color=\"primary\" variant=\"contained\" component=\"span\">\r\n                                                Upload\r\n                                                <AddIcon />\r\n                                            </Button>}\r\n                                        </label>\r\n                                    </div>\r\n                                </Box>\r\n                            </Grid>\r\n                            <Grid item>\r\n                                <Box mx={2}>\r\n                                    <Fab color=\"primary\" aria-label=\"add\" size=\"small\" onClick={togglePopper}>\r\n                                        <EmojiEmotionsIcon />\r\n                                        {/* <IconButton size=\"small\">\r\n                                        </IconButton> */}\r\n                                    </Fab>\r\n                                    <Popper id={Boolean(anchorEl) ? \"popper\" : undefined} open={Boolean(anchorEl)} disablePortal={true} anchorEl={anchorEl}>\r\n                                        <ClickAwayListener onClickAway={() => {\r\n                                            setAnchorEl(null!);\r\n                                        }}>\r\n                                            <Box mb={2}>\r\n                                                <Picker\r\n                                                    onEmojiClick={onEmojiClick}\r\n                                                    disableAutoFocus={true}\r\n                                                    skinTone={SKIN_TONE_MEDIUM_DARK}\r\n                                                    groupNames={{ smileys_people: \"PEOPLE\" }}\r\n                                                    native\r\n                                                />\r\n                                            </Box>\r\n                                        </ClickAwayListener>\r\n                                    </Popper>\r\n                                </Box>\r\n                            </Grid>\r\n                            <Grid item style={{ flexGrow: 1 }}>\r\n                                <TextField inputRef={inputeRef} label=\"Message..\" size=\"small\" value={values.message} variant=\"outlined\" fullWidth onChange={e => {\r\n                                    setMessage(e.target.value);\r\n                                    if (!typing.current) {\r\n                                        typing.current = true;\r\n                                        socket.emit(\"typing\");\r\n                                    }\r\n                                    if (timeout.current) {\r\n                                        clearTimeout(timeout.current);\r\n                                    }\r\n                                    timeout.current = setTimeout(() => {\r\n                                        timeout.current = null!;\r\n                                        typing.current = false;\r\n                                        socket.emit(\"stop typing\");\r\n                                    }, 1000);\r\n                                }} />\r\n                            </Grid>\r\n                            <Grid item>\r\n                                <Box ml={2}>\r\n                                    <Button color=\"primary\" variant=\"contained\" type=\"submit\">Send</Button>\r\n                                </Box>\r\n                            </Grid>\r\n                        </Form>\r\n                    }}\r\n                </Formik>\r\n            </ChatTextfield>\r\n        </Grid>\r\n    </Grid >\r\n}\r\n\r\nexport default Messenger;","import axios from \"utils/axios\";\r\nimport { headers } from \"./config\";\r\n\r\n\r\nexport const searchRoomsInIds = (ids: string[]) => {\r\n    return axios.post<any[]>(`/rooms/search-ids`, { ids }, { headers })\r\n}\r\n/**\r\n * \r\n * @param members Array of ids\r\n * @returns \r\n */\r\nexport const searchRoomsInMembers = (members: string[]) => {\r\n    return axios.post<any[]>(`/rooms/search-members`, { ids: members }, { headers })\r\n}","import { Avatar, Badge, Button, List, ListItem, ListItemIcon, ListItemText, TextField } from \"@mui/material\";\r\nimport { Box } from \"@mui/system\";\r\nimport React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport { urls, useRouting } from \"routes\";\r\nimport { endpointURL } from \"services/config\";\r\nimport { searchUsers } from \"services/user.service\";\r\nimport { FullUser } from \"typescript/models/User\";\r\n\r\nconst UserSearch = () => {\r\n    const [users, setUsers] = useState<FullUser[]>([]);\r\n    const { routeTo } = useRouting()\r\n    const [search, setSearch] = useState(\"\");\r\n    const searchUsersHandler = async () => {\r\n        const users = await searchUsers({\r\n            limit: 999, offset: 0, search\r\n        })\r\n        setUsers(users.data.results);\r\n    }\r\n    return <Box sx={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        p: 2\r\n    }}>\r\n        <Helmet\r\n            title=\"Search User\"\r\n        />\r\n        <Box sx={{\r\n            width: 200\r\n        }}>\r\n            <TextField placeholder=\"Search users ...\" fullWidth value={search}\r\n                onChange={e => setSearch(e.target.value)}\r\n            />\r\n        </Box>\r\n        <Box sx={{\r\n            m: 2\r\n        }}>\r\n            <List>\r\n                {users.map(user => <React.Fragment key={user._id}>\r\n                    <ListItem button onClick={() => {\r\n                        routeTo(urls.userProfile, { userId: user._id });\r\n                    }}>\r\n                        <ListItemIcon>\r\n                            <Badge\r\n                                overlap=\"circular\"\r\n                                anchorOrigin={{\r\n                                    vertical: \"bottom\",\r\n                                    horizontal: \"right\",\r\n                                }}\r\n                                variant=\"dot\"\r\n                            >\r\n                                <Avatar\r\n                                    alt=\"Alex Profir\"\r\n                                    src={`${endpointURL}/file/${user.avatar}`}\r\n                                />\r\n                            </Badge>\r\n                        </ListItemIcon>\r\n                        <ListItemText primary={`${user.first_name} ${user.last_name}`} />\r\n                    </ListItem>\r\n                </React.Fragment>)}\r\n            </List>\r\n        </Box>\r\n        <Button color=\"primary\" variant=\"contained\" onClick={searchUsersHandler}>Search !</Button>\r\n    </Box>\r\n}\r\n\r\nexport default UserSearch;","import SignUp from \"pages/Auth/SignUp\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AuthGuard } from \"../components/guards/AuthGuard\";\r\nimport SignIn from \"../pages/Auth/SignIn\";\r\nimport Dashboard from \"../pages/Dashboard/Dashboard\";\r\nimport Landing from \"../pages/Dashboard/Landing\";\r\nimport UserProfile from \"pages/Dashboard/user.profile\";\r\nimport { RouteType } from \"../typescript/routes\";\r\nimport Messenger from \"pages/Dashboard/Messenger\";\r\nimport UserSearch from \"pages/Dashboard/user.search\";\r\n\r\nexport const urls = {\r\n    //auth routues\r\n    login: () => \"/login\",\r\n    register: () => \"/register\",\r\n\r\n    //dashboard routes\r\n    dashboard: () => \"/dashboard\",\r\n\r\n    userProfile: (p: { userId: string }) => `/users/${p.userId}`,\r\n    messenger: () => \"/messenger\",\r\n    searchUsers: () => \"/search/users\"\r\n}\r\n\r\n\r\nexport function useRouting() {\r\n    const history = useHistory();\r\n\r\n    function routeTo(fn: () => string): void\r\n    function routeTo<T>(fn: (p: T) => string, params: T): void\r\n    function routeTo<T>(fn: (p?: T) => string, params?: T) {\r\n\r\n        history.push(fn(params));\r\n    }\r\n    return {\r\n        routeTo,\r\n        history\r\n    }\r\n}\r\n\r\nexport function route(fn: () => string): string\r\nexport function route<T>(fn: (p: T) => string, params: Array<keyof T>): string\r\nexport function route<T>(fn: (p: T) => string, params: Array<keyof T> = []) {\r\n    const parameter = Object.fromEntries(params.map(p => [p, \":\" + p]));\r\n    return fn(parameter as any);\r\n}\r\n\r\nconst authRoutes: RouteType = {\r\n    path: \"/\",\r\n    guard: AuthGuard,\r\n    children: [{\r\n        component: SignIn,\r\n        path: route(urls.login),\r\n    }, {\r\n        component: SignUp,\r\n        path: route(urls.register)\r\n    }],\r\n    component: null\r\n}\r\nconst dashboardRoutes: RouteType = {\r\n    path: route(urls.dashboard),\r\n    // component: Dashboard,\r\n    component: null,\r\n    guard: AuthGuard,\r\n    children: [{\r\n        path: route(urls.dashboard),\r\n        guard: AuthGuard,\r\n        component: Dashboard,\r\n    }, {\r\n        path: route(urls.userProfile, [\"userId\"]),\r\n        component: UserProfile,\r\n        guard: AuthGuard,\r\n    }, {\r\n        path: route(urls.messenger),\r\n        guard: AuthGuard,\r\n        component: Messenger,\r\n    }, {\r\n        path: route(urls.searchUsers),\r\n        guard: AuthGuard,\r\n        component: UserSearch\r\n    }]\r\n}\r\n\r\nconst landingRoute: RouteType = {\r\n    path: \"/\",\r\n    component: Landing,\r\n    guard: AuthGuard,\r\n    children: null,\r\n}\r\nexport const authRouter = [authRoutes];\r\n\r\nexport const dashboardRouter = [landingRoute, dashboardRoutes];\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgArrow(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 448 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z\",\n    className: \"\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgArrow);\nexport default __webpack_public_path__ + \"static/media/arrow.2e552680.svg\";\nexport { ForwardRef as ReactComponent };","import { Redirect } from \"react-router-dom\";\r\n\r\nexport default function Landing() {\r\n    return <Redirect from=\"/\" to=\"/dashboard\" />\r\n}","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgBell(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 28 28\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.847 23.488C9.207 23.488 11.443 23.363 14.467 22.806 13.944 24.228 12.581 25.247 10.98 25.247 9.649 25.247 8.483 24.542 7.825 23.488L7.847 23.488ZM24.923 15.73C25.17 17.002 24.278 18.127 22.27 19.076 21.17 19.595 18.724 20.583 14.684 21.369 11.568 21.974 9.285 22.113 7.848 22.113 7.421 22.113 7.068 22.101 6.79 22.085 4.574 21.958 3.324 21.248 3.077 19.976 2.702 18.049 3.295 17.305 4.278 16.073L4.537 15.748C5.2 14.907 5.459 14.081 5.035 11.902 4.086 7.022 6.284 3.687 11.064 2.753 15.846 1.83 19.134 4.096 20.083 8.977 20.506 11.156 21.056 11.824 21.986 12.355L21.986 12.356 22.348 12.561C23.72 13.335 24.548 13.802 24.923 15.73Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBell);\nexport default __webpack_public_path__ + \"static/media/bell.f0c76da2.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgBolt(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 320 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z\",\n    className: \"\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBolt);\nexport default __webpack_public_path__ + \"static/media/bolt.bbfd3d7a.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCaret(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 320 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z\",\n    className: \"\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCaret);\nexport default __webpack_public_path__ + \"static/media/caret.17f0a4fb.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgChevron(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 256 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24.707 38.101L4.908 57.899c-4.686 4.686-4.686 12.284 0 16.971L185.607 256 4.908 437.13c-4.686 4.686-4.686 12.284 0 16.971L24.707 473.9c4.686 4.686 12.284 4.686 16.971 0l209.414-209.414c4.686-4.686 4.686-12.284 0-16.971L41.678 38.101c-4.687-4.687-12.285-4.687-16.971 0z\",\n    className: \"\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgChevron);\nexport default __webpack_public_path__ + \"static/media/chevron.52254b8e.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCog(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z\",\n    className: \"\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCog);\nexport default __webpack_public_path__ + \"static/media/cog.8c5b9138.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMessenger(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 28 28\",\n    alt: \"\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14 2.042c6.76 0 12 4.952 12 11.64S20.76 25.322 14 25.322a13.091 13.091 0 0 1-3.474-.461.956 .956 0 0 0-.641.047L7.5 25.959a.961.961 0 0 1-1.348-.849l-.065-2.134a.957.957 0 0 0-.322-.684A11.389 11.389 0 0 1 2 13.682C2 6.994 7.24 2.042 14 2.042ZM6.794 17.086a.57.57 0 0 0 .827.758l3.786-2.874a.722.722 0 0 1 .868 0l2.8 2.1a1.8 1.8 0 0 0 2.6-.481l3.525-5.592a.57.57 0 0 0-.827-.758l-3.786 2.874a.722.722 0 0 1-.868 0l-2.8-2.1a1.8 1.8 0 0 0-2.6.481Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMessenger);\nexport default __webpack_public_path__ + \"static/media/messenger.39261066.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgPlus(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"aria-hidden\": \"true\",\n    viewBox: \"0 0 448 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z\",\n    className: \"\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPlus);\nexport default __webpack_public_path__ + \"static/media/plus.d5a88a59.svg\";\nexport { ForwardRef as ReactComponent };","import { FC, useEffect, useRef, createContext } from \"react\";\r\n\r\nimport { CSSTransition } from \"react-transition-group\"\r\nimport { ReactComponent as ArrowIcon } from \"assets/svg/arrow.svg\";\r\nimport { ReactComponent as BellIcon } from \"assets/svg/bell.svg\";\r\nimport { ReactComponent as BoltIcon } from \"assets/svg/bolt.svg\";\r\nimport { ReactComponent as CaretIcon } from \"assets/svg/caret.svg\";\r\nimport { ReactComponent as ChevronIcon } from \"assets/svg/chevron.svg\";\r\nimport { ReactComponent as CogIcon } from \"assets/svg/cog.svg\";\r\nimport { ReactComponent as MessengerIcon } from \"assets/svg/messenger.svg\";\r\nimport { ReactComponent as PlusIcon } from \"assets/svg/plus.svg\";\r\nimport ExitToAppIcon from '@mui/icons-material/ExitToApp';\r\n\r\nimport { useState } from \"react\";\r\nimport { useContext } from \"react\";\r\nimport { UserContext } from \"contexts/UserContext\";\r\nimport { endpointURL } from \"services/config\";\r\nimport { Avatar, Badge, Box, Button, ClickAwayListener, Typography } from \"@mui/material\";\r\nimport { urls, useRouting } from \"routes\";\r\nimport { useEffectAsync } from \"hooks/useEffecyAsync\";\r\nimport { acceptFriendRequest, getUserById, rejectFriendRequest } from \"services/user.service\";\r\nimport { FullUser } from \"typescript/models/User\";\r\n\r\nconst OpenDropwdownContext = createContext<[string | null, React.Dispatch<string | null>]>([null, () => { }]);\r\n\r\ntype IconType = JSX.Element | string\r\nconst Navbar: FC<{}> = ({ children }) => {\r\n    return (\r\n        <nav className=\"navbar\">\r\n            <ul className=\"navbar-nav\">\r\n                {children}\r\n            </ul>\r\n        </nav>\r\n    )\r\n}\r\n\r\nconst RenderUserRequest = ({ userId }: { userId: string }) => {\r\n    const [user, setUser] = useState<FullUser | null>(null);\r\n    const { routeTo } = useRouting();\r\n    useEffectAsync(async () => {\r\n        const response = await getUserById(userId);\r\n        setUser(response.data);\r\n    }, []);\r\n    return (\r\n        // eslint-disable-next-line jsx-a11y/anchor-is-valid\r\n        <a className=\"menu-item\" style={{\r\n            height: \"auto\"\r\n        }}>\r\n            <OpenDropwdownContext.Consumer>\r\n                {([, setOpen]) => {\r\n                    return <>\r\n                        <span className=\"icon-button\">\r\n                            <Avatar alt={\"my-profile\"} onClick={() => {\r\n                                routeTo(urls.userProfile, { userId })\r\n                            }} src={user?.avatar ? `${endpointURL}/file/${user?.avatar}` : \"\"} ></Avatar>\r\n                        </span>\r\n                        <Box>\r\n                            <Typography component=\"div\" variant=\"body1\">\r\n\r\n                                <strong>{user ? `${user?.first_name} ${user?.last_name}` : \"Loading ...\"}</strong> wants to be friend with you :)\r\n                            </Typography>\r\n                            <Box sx={{\r\n                                display: \"flex\"\r\n                            }}>\r\n                                <Button color=\"secondary\" variant=\"contained\" onClick={async () => {\r\n                                    await acceptFriendRequest(userId);\r\n                                    setOpen(null);\r\n                                }}>Accept</Button>\r\n                                <div style={{ flexGrow: 1 }}></div>\r\n                                <Button color=\"secondary\" variant=\"contained\" sx={{\r\n                                    backgroundColor: \"gray\",\r\n                                    \"&:hover\": {\r\n                                        backgroundColor: \"darkgray\",\r\n\r\n                                    }\r\n                                }} onClick={async () => {\r\n                                    await rejectFriendRequest(userId);\r\n                                    setOpen(null);\r\n                                }}>Decline</Button>\r\n                            </Box>\r\n                        </Box>\r\n                    </>\r\n                }}\r\n            </OpenDropwdownContext.Consumer>\r\n\r\n        </a>\r\n    )\r\n}\r\n\r\nfunction FriendRequestDropdownItem(userId: string): FC<{\r\n    userId: string\r\n}> {\r\n    return () => {\r\n        return (\r\n            <RenderUserRequest userId={userId} />\r\n        )\r\n    }\r\n}\r\nfunction DropdownMenu({ menuInitial, options }: {\r\n    menuInitial: string;\r\n    options: DropdownOption[]\r\n}) {\r\n\r\n    const [, setOpen] = useContext(OpenDropwdownContext);\r\n    const [activeMenu, setActiveMenu] = useState(menuInitial);\r\n\r\n    const [menuHeight, setMenuHeight] = useState<number>();\r\n    const dropdownRef = useRef<any>(null);\r\n\r\n    useEffect(() => {\r\n        setMenuHeight(dropdownRef.current?.firstChild.clientHeight + 32)\r\n    }, [])\r\n\r\n    function calcHeight(el: HTMLElement) {\r\n        const height = el.clientHeight + 32;\r\n        setMenuHeight(height);\r\n    }\r\n\r\n    const DropdownItem: FC<{\r\n        leftIcon?: IconType;\r\n        rightIcon?: IconType\r\n        goToMenu?: string;\r\n        onClick?: () => void\r\n    }> = ({ children, rightIcon, leftIcon, goToMenu, onClick }) => {\r\n        return (\r\n            // eslint-disable-next-line jsx-a11y/anchor-is-valid\r\n            <a className=\"menu-item\" onClick={() => {\r\n                goToMenu && setActiveMenu(goToMenu);\r\n                onClick && onClick();\r\n            }}>\r\n                <span className=\"icon-button\">{leftIcon}</span>\r\n                {children}\r\n                <span className=\"icon-right\">{rightIcon}</span>\r\n            </a>\r\n        )\r\n    }\r\n    return (\r\n        <ClickAwayListener\r\n            touchEvent=\"onTouchStart\"\r\n            onClickAway={() => {\r\n                setOpen(null);\r\n            }}\r\n        >\r\n            <div className=\"dropdown\" ref={dropdownRef}\r\n                style={{ height: menuHeight }}\r\n            >\r\n                {options.map((option, i) => {\r\n                    return <CSSTransition\r\n                        key={i + \"css-transition\" + option.entryPoint}\r\n                        in={activeMenu === option.entryPoint}\r\n                        timeout={500}\r\n                        classNames={`menu-${option.type}`}\r\n                        unmountOnExit\r\n                        onEnter={calcHeight}\r\n                    >\r\n                        <div className=\"menu\">\r\n                            {option.options.map((item, j) => {\r\n                                const { label, action, CustomDropdown, ...rest } = item;\r\n                                const Renderer = CustomDropdown ?? DropdownItem;\r\n                                return <Renderer\r\n                                    key={j + label.toString() + i}\r\n                                    onClick={action}\r\n                                    {...rest}\r\n                                >\r\n                                    {label}\r\n                                </Renderer>\r\n                            })}\r\n                        </div>\r\n                    </CSSTransition>\r\n                })}\r\n            </div>\r\n        </ClickAwayListener>\r\n    );\r\n}\r\nconst NavItem: FC<{\r\n    icon: IconType;\r\n    name: string;\r\n    onClick?: () => void,\r\n    badgeContent?: number\r\n}> = ({ icon, name, onClick, children, badgeContent }) => {\r\n    const [open, setOpen] = useContext(OpenDropwdownContext);\r\n\r\n    const thisIsOpen = open === name;\r\n    return (\r\n        <li className=\"nav-item\">\r\n            <Badge badgeContent={badgeContent} className={`icon-button ${thisIsOpen && \"open\"}`} onClick={() => {\r\n                onClick && onClick();\r\n                if (thisIsOpen) {\r\n                    setOpen(null);\r\n                } else {\r\n                    setOpen(name)\r\n                }\r\n            }} color=\"primary\">\r\n\r\n                {icon}\r\n            </Badge>\r\n            {thisIsOpen && children}\r\n        </li >\r\n    )\r\n}\r\ntype DropdownOption = {\r\n    entryPoint: string;\r\n\r\n    type: \"primary\" | \"secondary\"\r\n    options: {\r\n        label: IconType,\r\n        leftIcon?: IconType,\r\n        rightIcon?: IconType,\r\n        goToMenu?: string;\r\n        action?: () => void;\r\n        CustomDropdown?: FC<any>\r\n    }[]\r\n}\r\ntype MenuOptionsType = {\r\n    icon: JSX.Element;\r\n    name: string;\r\n    action?: () => void\r\n    dropdownEntryPoint?: string;\r\n    badgeContent?: number\r\n    dropdownMenu?: DropdownOption[]\r\n}[]\r\nconst MainLayout: React.FC = ({ children }) => {\r\n\r\n    const { logout, user } = useContext(UserContext);\r\n    const { routeTo } = useRouting();\r\n\r\n    const handleMyProfile = () => {\r\n        if (user) {\r\n            routeTo(urls.userProfile, { userId: user._id });\r\n        }\r\n    }\r\n    const handleMessenger = () => {\r\n        routeTo(urls.messenger);\r\n    }\r\n    const handlePlus = () => {\r\n        routeTo(urls.searchUsers)\r\n    }\r\n    const [open, setOpen] = useState<string | null>(null);\r\n    const MenuOptions: MenuOptionsType = [{\r\n        icon: <MessengerIcon />,\r\n        name: \"messenger\",\r\n        action: handleMessenger\r\n    },\r\n    {\r\n        icon: <BellIcon />,\r\n        name: \"bell\",\r\n        badgeContent: user.friendRequests.length,\r\n        dropdownEntryPoint: \"main\",\r\n        dropdownMenu: user.friendRequests.length > 0 ? [{\r\n            entryPoint: \"main\",\r\n            type: \"primary\",\r\n            options: user.friendRequests.map(userId => ({\r\n                label: \"\",\r\n                CustomDropdown: FriendRequestDropdownItem(userId),\r\n            }))\r\n        }] : null!\r\n    }, {\r\n        icon: <PlusIcon />,\r\n        name: \"plus\",\r\n        action: handlePlus\r\n    }, {\r\n        icon: <CaretIcon />,\r\n        name: \"dropdown\",\r\n        dropdownEntryPoint: \"main\",\r\n        dropdownMenu: [{\r\n            entryPoint: \"main\",\r\n            type: \"primary\",\r\n            options: [{\r\n                label: \"My Profile\",\r\n                action: handleMyProfile,\r\n                leftIcon: user ? <Avatar alt={\"my-profile\"} src={user.avatar ? `${endpointURL}/file/${user.avatar}` : \"\"} ></Avatar> : undefined,\r\n            }, {\r\n                leftIcon: <CogIcon />,\r\n                rightIcon: <ChevronIcon />,\r\n                goToMenu: \"settings\",\r\n                label: \"Settings\"\r\n            }, {\r\n                leftIcon: <ExitToAppIcon />,\r\n                label: \"Logout\",\r\n                action: logout,\r\n            }]\r\n        }, {\r\n            entryPoint: \"settings\",\r\n            type: \"secondary\",\r\n            options: [{\r\n                leftIcon: <ArrowIcon />,\r\n                label: <h2>Settings</h2>,\r\n                goToMenu: \"main\"\r\n            }, {\r\n                label: \"Generic Text\",\r\n                leftIcon: <BoltIcon />\r\n            }, {\r\n                label: \"Generic Text\",\r\n                leftIcon: <BoltIcon />\r\n            }, {\r\n                label: \"Generic Text\",\r\n                leftIcon: <BoltIcon />\r\n            }]\r\n        }]\r\n    }]\r\n    return <div style={{\r\n        height: \"100%\",\r\n    }}>\r\n        <OpenDropwdownContext.Provider value={[open, setOpen]}>\r\n            <Navbar>\r\n                {MenuOptions.map((options, index) => {\r\n                    return <NavItem\r\n                        key={index + \"nav-item\"}\r\n                        icon={options.icon}\r\n                        name={options.name}\r\n                        onClick={options.action}\r\n                        badgeContent={options.badgeContent}\r\n                    >\r\n                        {\r\n                            options.dropdownMenu &&\r\n                            options.dropdownEntryPoint &&\r\n                            <DropdownMenu\r\n                                menuInitial={options.dropdownEntryPoint}\r\n                                options={options.dropdownMenu}\r\n                            />\r\n                        }\r\n                    </NavItem>\r\n                })}\r\n            </Navbar>\r\n        </OpenDropwdownContext.Provider>\r\n        <div style={{\r\n            // TODO is this the greates solution? idk \r\n            height: \"calc(100% - 60px)\",\r\n            // overflow: \"hidden\",\r\n            overflowX: \"hidden\",\r\n            maxWidth: \"100vw\",\r\n        }}>\r\n            {children}\r\n        </div>\r\n    </div >\r\n}\r\n\r\nexport default MainLayout;\r\n","import { Button, Grid } from \"@mui/material\";\r\nimport React from \"react\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport { urls, useRouting } from \"routes\";\r\n\r\nconst NotFound = () => {\r\n    const { routeTo } = useRouting();\r\n    return <React.Fragment>\r\n        <Helmet\r\n            title=\"404 Not Found\"\r\n        />\r\n        <Grid container alignItems=\"center\" direction=\"column\" justifyContent=\"center\" style={{ height: \"100%\" }}>\r\n            <Grid item >\r\n                <img src={process.env.PUBLIC_URL + \"not_found.jpg\"} alt=\"Not Found\"></img>\r\n            </Grid>\r\n            <Grid item>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={() => {\r\n                    routeTo(urls.dashboard);\r\n                }}>Take me back</Button>\r\n            </Grid>\r\n        </Grid>\r\n    </React.Fragment>\r\n}\r\nexport default NotFound;","import { Box } from \"@mui/material\";\r\n\r\nconst LoginLayout: React.FC = ({ children }) => {\r\n    return (\r\n        <Box style={{\r\n            height: \"100vh\"\r\n        }}>\r\n            {children}\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default LoginLayout;","import { useEffect, useState } from \"react\"\r\nimport { getCurrentUser } from \"services/auth.service\";\r\nimport { useDispatch } from \"store\";\r\nimport { retrieveStorageToken } from \"utils/utilFunctions\";\r\n\r\nconst useInitialize = () => {\r\n    const [checked, setChecked] = useState(false);\r\n    const dispatch = useDispatch();\r\n    useEffect(() => {\r\n        async function checkSession() {\r\n            try {\r\n                retrieveStorageToken();\r\n                const req = await getCurrentUser();\r\n                dispatch({\r\n                    type: \"SET_USER\",\r\n                    user: req.data,\r\n                })\r\n            } catch (err) {\r\n                console.log(err);\r\n            } finally {\r\n                setChecked(true);\r\n            }\r\n        }\r\n        checkSession();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n    return { checked };\r\n}\r\nexport default useInitialize","import { Box, styled } from \"@mui/material\";\r\n\r\nconst LoaderBox = styled(Box)(({ theme }) => ({\r\n    height: '100%',\r\n    background: theme.palette.background.paper\r\n}))\r\n\r\nconst LoaderPage = () => {\r\n    return <LoaderBox>\r\n    </LoaderBox>\r\n}\r\nexport default LoaderPage;","import React from \"react\";\r\nimport { Route, Switch, BrowserRouter } from \"react-router-dom\";\r\nimport { authRouter, dashboardRouter } from \"./index\";\r\nimport { RouteType } from \"typescript/routes\";\r\nimport MainLayout from \"components/layouts/MainLayout\";\r\nimport NotFound from \"pages/404NotFound\";\r\nimport LoginLayout from \"components/layouts/LoginLayout\";\r\nimport useInitialize from \"hooks/useInitialize\";\r\nimport LoaderPage from \"pages/LoaderPage\";\r\n\r\n/**\r\n * \r\n * @param Layout A layout is the wrapper around the child ( e.g a header that renders the routes underneath)\r\n * @param routes \r\n * @returns an array of routes\r\n */\r\nconst createRoutes = (Layout: React.ElementType, routes: Array<RouteType>) =>\r\n    routes.map(({ component: Page, children, path, guard }, i) => {\r\n        const Guard = guard || React.Fragment;\r\n        return children ? (\r\n            children.map((child, i) => {\r\n                const Guard = child.guard || React.Fragment;\r\n                const Page = child.component || React.Fragment // fragment should never be the case\r\n                return <Route\r\n                    key={i}\r\n                    path={child.path}\r\n                    exact\r\n                    render={props => (\r\n                        <Guard>\r\n                            <Layout>\r\n                                <Page {...props} />\r\n                            </Layout>\r\n                        </Guard>\r\n                    )}\r\n                />\r\n            })\r\n        ) : Page ? (\r\n            <Route\r\n                key={i}\r\n                path={path}\r\n                exact\r\n                render={props => (\r\n                    <Guard>\r\n                        <Layout>\r\n                            <Page {...props} />\r\n                        </Layout>\r\n                    </Guard>\r\n                )}\r\n            />\r\n        ) : null\r\n    })\r\n\r\nexport default function Routes() {\r\n    const { checked } = useInitialize();\r\n    if (!checked) {\r\n        return <LoaderPage />;\r\n    }\r\n    return <BrowserRouter>\r\n        <Switch>\r\n            {createRoutes(MainLayout, dashboardRouter)}\r\n            {createRoutes(LoginLayout, authRouter)}\r\n            <Route>\r\n                <NotFound />\r\n            </Route>\r\n        </Switch>\r\n    </BrowserRouter>\r\n}","import { DeprecatedThemeOptions } from \"@mui/material\";\r\n\r\nexport const palette: DeprecatedThemeOptions[\"palette\"] = {\r\n    primary: {\r\n        // need to change the header? check --header-bg in the css\r\n        // main: \"hsla(71, 100%, 10%, 1)\",\r\n        // #7baf99\r\n        main: \"rgb(123,175,153)\",\r\n        contrastText: \"#FFF\",\r\n    },\r\n    secondary: {\r\n        // main: \"hsla(90, 100%, 10%, 1)\",\r\n        main: \"#46624c\",\r\n        contrastText: \"#FFF\",\r\n    },\r\n\r\n}","import { DeprecatedThemeOptions } from \"@mui/material\";\r\nexport const typography: DeprecatedThemeOptions[\"typography\"] = {\r\n    // fontFamily: [\r\n    //     \"Inter\",\r\n    //     \"-apple-system\",\r\n    //     \"BlinkMacSystemFont\",\r\n    //     '\"Segoe UI\"',\r\n    //     \"Roboto\",\r\n    //     '\"Helvetica Neue\"',\r\n    //     \"Arial\",\r\n    //     \"sans-serif\",\r\n    //     '\"Apple Color Emoji\"',\r\n    //     '\"Segoe UI Emoji\"',\r\n    //     '\"Segoe UI Symbol\"',\r\n    // ].join(\",\"),\r\n    fontSize: 13,\r\n    fontWeightLight: 300,\r\n    fontWeightRegular: 400,\r\n    fontWeightMedium: 500,\r\n    fontWeightBold: 600,\r\n}","import React from 'react';\r\nimport { HelmetProvider, Helmet } from 'react-helmet-async';\r\nimport ContextsProvider from './contexts/ContextsProvider';\r\nimport Routes from './routes/Routes';\r\nimport { Provider } from \"react-redux\"\r\nimport \"App.css\"\r\nimport { store } from 'store';\r\nimport { ThemeProvider, StyledEngineProvider, CssBaseline } from '@mui/material';\r\nimport { themeCreator } from 'styles/theme/theme';\r\nfunction App() {\r\n  return (\r\n    <React.Fragment>\r\n      <HelmetProvider>\r\n        <Helmet\r\n          titleTemplate=\"%s | Roly Poly\"\r\n          defaultTitle=\"Roly Poly\"\r\n        />\r\n        <CssBaseline />\r\n        <StyledEngineProvider injectFirst>\r\n          <ThemeProvider theme={themeCreator()}>\r\n            <Provider store={store}>\r\n              <ContextsProvider>\r\n                <Routes />\r\n              </ContextsProvider>\r\n            </Provider>\r\n          </ThemeProvider>\r\n        </StyledEngineProvider>\r\n      </HelmetProvider>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","\r\nimport { createTheme } from '@mui/material'\r\nimport { adaptV4Theme } from '@mui/material/styles';\r\n// import { overrides } from \"./overrides\"\r\nimport { palette } from './palette'\r\nimport { typography } from \"./typography\"\r\nexport const themeCreator = () => {\r\n    return createTheme(adaptV4Theme({\r\n        // overrides,\r\n        typography,\r\n        palette,\r\n    }));\r\n}","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}