(this["webpackJsonproly-poly-frontend"]=this["webpackJsonproly-poly-frontend"]||[]).push([[0],{184:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(42),i=n.n(c),o=(n(184),n(26)),u=n(7),s="https://roly-poly-api.herokuapp.com",l={},d=n(148),j="user-RP";function b(e){return"isAxiosError"in e}function f(e){var t={token:e};localStorage.setItem(j,JSON.stringify(t))}function h(){var e=localStorage.getItem(j);if(e){var t=JSON.parse(e).token;return l.Authorization="Bearer ".concat(t),t}}function p(e){return new Promise((function(t,n){var r=new Image;r.src=e,r.onload=function(){return t(e)},r.onerror=function(e){n(e)}}))}var O=n(13),m=n.n(O),x=n(16),v=n(149),g=n.n(v).a.create({baseURL:s}),y=function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.post("/auth/login",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){return g.post("/auth/register",e)},E=function(){return g.get("/auth/current-user",{headers:l})},w=n(63),C=n(150),k=n(77),S=n(30);var F={userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":return Object(S.a)(Object(S.a)({},e),t.user);case"USER_REGISTER":case"SET_USER":return t.user;case"USER_LOGIN_ERROR":return Object(S.a)(Object(S.a)({},e),{},{error:t.error});case"SET_USER_PROFILE":return Object(S.a)(Object(S.a)({},e),{},{avatar:t.avatar});case"USER_LOGOUT":return null;default:return e}}},I=Object(w.combineReducers)(F),_=n(151),R=Object(_.composeWithDevTools)({name:"Roly Poly"}),P=function(e){return Object(k.c)(e)},B=function(){return Object(k.b)()},A=Object(w.createStore)(I,R(Object(w.applyMiddleware)(C.a))),N=function(e){var t=new FormData;return t.append("file",e),g.post("/user/upload-pfp",t,{headers:l})},T=function(e){return g.get("/user/".concat(e),{headers:l})},L=function(e){return g.post("/user/send-friend-request",{id:e},{headers:l})},z=function(e){return g.post("/user/accept-friend-request",{id:e},{headers:l})},M=function(e){return g.post("/user/reject-friend-request",{id:e},{headers:l})},W=function(e){return g.get("/user/search/".concat(function(e){var t=Object.entries(e).map((function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(r)})).join("&");return t?"?".concat(t):""}(e)))},U=function(e){return function(){var t=Object(x.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(e);case 2:r=t.sent.data,n({type:"SET_USER_PROFILE",avatar:r.filename});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function q(){var e=B(),t=P((function(e){return e.userReducer})),n=function(){var t=Object(x.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E();case 2:n=t.sent,e({type:"SET_USER",user:n.data});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{user:t,logout:function(){e(function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem(j),t({type:"USER_LOGOUT"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},fetchUser:n}}var G=n(1),H=Object(r.createContext)(null),$=Object(r.createContext)(null),V=[function(e){var t=e.children,n=q();return Object(G.jsx)(H.Provider,{value:n,children:t})},function(e){var t=e.children,n=Object(r.useContext)(H),a=n.user,c=n.fetchUser,i=Object(r.useState)(null),o=Object(u.a)(i,2),l=o[0],j=o[1];return Object(r.useEffect)((function(){if(a&&!l){var e=Object(d.io)(s),t=h();e.emit("authenticate",t),j(e),e.on(a._id,(function(){c()}))}return!a&&l&&l.connected&&(l.disconnect(),j(null)),function(){l&&l.connected&&j(null)}}),[a,l,c]),Object(G.jsx)($.Provider,{value:l,children:t})}],Y=function e(t){var n=t.item,r=t.children;if(!n||0===n.length)return Object(G.jsx)(a.a.Fragment,{children:r});var c=n.shift();return Object(G.jsx)(c,{children:Object(G.jsx)(e,{item:n,children:r})})},J=function(e){var t=e.children;return Object(G.jsx)(Y,{item:V,children:t})},Z=n(18),K=n(34),X=n(288),Q=n(309),ee=n(310),te=n(307),ne=n(301),re=n(312),ae=n(313),ce=n(302),ie=n(49),oe=Object(ce.a)((function(e){return{root:{height:"100%",display:"grid",placeItems:"center"},image:{backgroundImage:"url(".concat("/roly-poly-bg.jpg",")"),backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.mode?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},submitError:{color:e.palette.error.dark,fontSize:"16px",fontWeight:"bold",textAlign:"center"},submitSuccess:{color:e.palette.success.dark,fontSize:"16px",fontWeight:"bold",textAlign:"center"},link:{color:"inherit","&:hover":{color:e.palette.primary.dark}},paper:{padding:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"}}})),ue=function(){var e=oe(),t=Object(r.useState)(!1),n=Object(u.a)(t,2),a=n[0],c=n[1];return Object(G.jsxs)(X.a,{className:e.root,children:[Object(G.jsx)(o.a,{title:"Register"}),Object(G.jsxs)(Q.a,{className:e.paper,children:[Object(G.jsx)(ee.a,{component:"h1",variant:"h5",children:"Sign Up"}),Object(G.jsx)(ie.b,{initialValues:{first_name:"",last_name:"",password:"",email:"",submit:"",chatRooms:[],friends:[],friendRequests:[]},onSubmit:function(){var e=Object(x.a)(m.a.mark((function e(t,n){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setErrors,e.prev=1,e.next=4,D(t);case 4:c(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),b(e.t0)&&(a=e.t0.response.data.message,console.log(a),r("string"===typeof a?{submit:a}:a));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(t){var n=t.handleChange,r=t.errors,c=t.isSubmitting;return Object(G.jsx)(ie.a,{children:Object(G.jsxs)(te.a,{container:!0,spacing:2,children:[Object(G.jsx)(te.a,{item:!0,xs:12,sm:6,children:Object(G.jsx)(ne.a,{label:"First Name",required:!0,fullWidth:!0,name:"first_name",onChange:n})}),Object(G.jsx)(te.a,{item:!0,xs:12,sm:6,children:Object(G.jsx)(ne.a,{label:"Last Name",required:!0,fullWidth:!0,name:"last_name",onChange:n})}),Object(G.jsx)(te.a,{item:!0,xs:12,children:Object(G.jsx)(ne.a,{label:"Email",error:!!r.email,helperText:r.email,name:"email",type:"email",required:!0,fullWidth:!0,onChange:n})}),Object(G.jsx)(te.a,{item:!0,xs:12,children:Object(G.jsx)(ne.a,{label:"Password",error:!!r.password,helperText:r.password,name:"password",type:"password",required:!0,fullWidth:!0,onChange:n})}),Object(G.jsx)(te.a,{item:!0,xs:12,children:Object(G.jsx)(re.a,{disabled:c,color:"primary",type:"submit",variant:"contained",fullWidth:!0,children:"Sign Up"})}),Object(G.jsx)(te.a,{item:!0,container:!0,justifyContent:"center",children:Object(G.jsx)(ee.a,{variant:"h6",className:e.submitError,children:r.submit})}),Object(G.jsx)(te.a,{item:!0,container:!0,justifyContent:"center",children:a&&Object(G.jsxs)(ee.a,{variant:"h6",className:e.submitSuccess,children:["Your account has been created, you can now\xa0",Object(G.jsx)(ae.a,{to:"/login",component:K.b,className:e.link,children:"Login"}),"\xa0into your account"]})}),Object(G.jsx)(te.a,{item:!0,container:!0,justifyContent:"flex-end",children:Object(G.jsx)(te.a,{item:!0,children:Object(G.jsx)(ae.a,{to:"/login",component:K.b,variant:"body2",children:"Already have an account? Sign in"})})})]})})}})]})]})},se=function(e){var t=e.children;return P((function(e){return e.userReducer}))?Object(G.jsx)(a.a.Fragment,{children:t}):Object(G.jsx)(Z.a,{to:"/login"})},le=Object(ce.a)((function(e){return{root:{height:"100%"},image:{backgroundImage:"url(".concat("/roly-poly-bg.jpg",")"),backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.mode?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submitError:{color:e.palette.error.dark,fontSize:"16px",fontWeight:"bold",textAlign:"center"},submit:{margin:e.spacing(3,0,2)}}})),de=function(){var e=B(),t=le(),n=Ze().routeTo;return Object(G.jsxs)(te.a,{container:!0,component:"main",className:t.root,children:[Object(G.jsx)(o.a,{title:"Login"}),Object(G.jsx)(te.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),Object(G.jsx)(te.a,{item:!0,xs:12,sm:8,md:5,component:Q.a,elevation:6,square:!0,children:Object(G.jsxs)("div",{className:t.paper,children:[Object(G.jsx)(ee.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(G.jsx)(ie.b,{initialValues:{password:"",email:"",submit:""},onSubmit:function(){var t=Object(x.a)(m.a.mark((function t(r,a){var c,i,o,u,s,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a.setErrors,t.prev=1,t.next=4,y(r);case 4:i=t.sent,o=i.data,u=o.user,s=o.token,e({type:"SET_USER",user:u}),f(s),n(Je.dashboard),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),b(t.t0)&&(l=t.t0.response.data.message,c({submit:l}));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}(),children:function(e){var n=e.values,r=e.handleChange,a=e.errors;return Object(G.jsxs)(ie.a,{className:t.form,children:[Object(G.jsx)(ne.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",value:n.email,onChange:r,label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(G.jsx)(ne.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,value:n.password,onChange:r,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(G.jsx)(re.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Sign In"}),Object(G.jsx)(X.a,{my:2,className:t.submitError,children:a.submit}),Object(G.jsxs)(te.a,{container:!0,children:[Object(G.jsx)(te.a,{item:!0,xs:!0,children:Object(G.jsx)(ae.a,{to:"/forgot-password",component:K.b,variant:"body2",children:"Forgot password?"})}),Object(G.jsx)(te.a,{item:!0,children:Object(G.jsx)(ae.a,{to:"/register",component:K.b,variant:"body2",children:"Don't have an account? Sign Up"})})]})]})}})]})})]})},je=n(157),be=n(314),fe=n(17),he=n(294),pe=[{option:"1$"},{option:"5$"},{option:"10$"},{option:"25$"},{option:"100$"},{option:"1.000.000 $"}];function Oe(e,t,n){for(var r=0,a=0;0===r;)r=Math.random();for(;0===a;)a=Math.random();var c=Math.sqrt(-2*Math.log(r))*Math.cos(2*Math.PI*a);return(c=c/10+.5)>1||c<0?c=Oe(e,t,n):(c=Math.pow(c,n),c*=t-e,c+=e),c}var me=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(0),i=Object(u.a)(c,2),s=i[0],l=i[1],d=Object(r.useState)(!1),j=Object(u.a)(d,2),b=j[0],f=j[1],h=Object(r.useState)(!1),p=Object(u.a)(h,2),O=p[0],m=p[1],x=function(e){var t=e.elemId,n=e.onResize,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=Object(he.a)((function(e){return e.breakpoints.down("sm")})),i=Object(r.useState)(0),o=Object(u.a)(i,2),s=o[0],l=o[1],d=Object(r.useState)(0),j=Object(u.a)(d,2),b=j[0],f=j[1],h=function(){var e=document.getElementById(t);if(e){var n=e.clientHeight,r=e.clientWidth;f(r),l(n)}};return Object(r.useEffect)((function(){return n&&window.addEventListener("resize",h),function(){window.removeEventListener("resize",h)}}),[]),Object(r.useEffect)((function(){h()}),[c,t].concat(Object(fe.a)(a))),{height:s,width:b}}({elemId:"spinner-container",onResize:!0},[b]),v=x.height;return Object(G.jsxs)("div",{style:{height:"100%"},children:[Object(G.jsx)(o.a,{title:"Dashboard"}),Object(G.jsxs)("div",{style:{display:"grid",placeItems:"center"},children:[Object(G.jsxs)("div",{onLoad:function(){f(!0)},id:"spinner-container",style:{position:"relative"},children:[Object(G.jsx)("div",{style:{position:"absolute",left:"50%",top:"49.9%",zIndex:1e3,transform:"translate(-50%,-50%)"},children:Object(G.jsx)(be.a,{onClick:function(){m(!1);var e=Math.floor(Oe(0,1,.9)*pe.length);l(e),a(!0)},disabled:n,color:"primary",sx:{width:20*v/100,height:20*v/100},children:"SPIN"})}),Object(G.jsx)(je.Wheel,{mustStartSpinning:n,prizeNumber:s,data:pe,onStopSpinning:function(){a(!1),m(!0)},outerBorderWidth:10,radiusLineWidth:8,innerRadius:20,innerBorderWidth:10,backgroundColors:["#3e3e3e","#df3428"],textColors:["#ffffff"]})]}),O&&Object(G.jsx)("div",{children:Object(G.jsxs)(ee.a,{variant:"h4",sx:{fontWeight:"bold"},children:["Current Prize:  ",Object(G.jsx)("span",{style:{color:"#df3428"},children:pe[s].option})]})})]})]})};var xe=n(308);function ve(e){return"object"===typeof e&&"then"in e}var ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(r.useState)(null),a=Object(u.a)(n,2),c=a[0],i=a[1];return Object(r.useEffect)((function(){var t=function(){};try{var n=e();n&&(ve(n)?n.then((function(e){t=e})).catch((function(e){i(e)})):"function"===typeof n&&(t=n))}catch(r){console.log({e:r}),i(r)}return t}),t),{error:c}},ye=n(158),De=n.n(ye),Ee=Object(ce.a)((function(e){return{root:{height:"100%"},centrate:{display:"grid",placeItems:"center",height:"100%"},default:{background:e.palette.primary.light},avatarContainer:{display:"flex",justifyContent:"center"},linkButton:{textTransform:"none"}}})),we=function(e){var t,n=Object(r.useContext)(H).user,a=Object(r.useContext)($),c=Ze(),i=c.routeTo,d=c.history,j=Ee(),b=B(),f=Object(r.useState)(null),h=Object(u.a)(f,2),p=h[0],O=h[1],v=Object(r.useState)(null),y=Object(u.a)(v,2),D=y[0],E=y[1],w=(null===p||void 0===p?void 0:p._id)===n._id,C=e.match.params.userId,k=n.friends.includes(C)&&(null===p||void 0===p?void 0:p.friends.includes(n._id)),S=null===p||void 0===p?void 0:p.friendRequests.includes(n._id),F=n.friendRequests.includes(null!==(t=null===p||void 0===p?void 0:p._id)&&void 0!==t?t:""),I=ge(Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(C);case 2:t=e.sent,O(t.data);case 4:case"end":return e.stop()}}),e)}))),[C]).error,_=Object(r.useCallback)(Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(C);case 2:t=e.sent,O(t.data);case 4:case"end":return e.stop()}}),e)}))),[C]);Object(r.useEffect)((function(){var e={id:C};return a.emit("join room",e),a.on(C,(function(){_()})),function(){a.emit("leave room",e)}}),[C]);var R=function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.files&&(n=t.target.files[0],b(function(){var e=Object(x.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(n)(t);case 2:return e.next=4,T(C);case 4:r=e.sent,O(r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(null===p||void 0===p?void 0:p._id);case 2:_();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(G.jsxs)("div",{className:j.root,children:[Object(G.jsx)(o.a,{title:p?"".concat(p.first_name," ").concat(p.last_name):""}),p&&Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:"".concat(j.avatarContainer," ").concat(j.default),style:{height:"300px",position:"relative",background:D?"rgb(".concat(D.r,",").concat(D.g,",").concat(D.b,")"):"",borderRadius:"0px 0px 80px 80px",marginBottom:"calc(75px + 25px)"},children:Object(G.jsx)(xe.a,{style:{width:"150px",height:"150px",boxShadow:"0 0 0pt 4pt white",position:"absolute",top:"225px"},imgProps:{crossOrigin:"",onLoad:function(e){var t=function(e){var t,n,r,a,c={r:0,g:0,b:0},i=document.createElement("canvas"),o=i.getContext&&i.getContext("2d"),u=-4,s={r:0,g:0,b:0},l=0;if(!o)return c;r=i.height=e.naturalHeight||e.offsetHeight||e.height,n=i.width=e.naturalWidth||e.offsetWidth||e.width,o.drawImage(e,0,0);try{t=o.getImageData(0,0,n,r)}catch(d){return c}for(a=t.data.length;(u+=20)<a;)++l,s.r+=t.data[u],s.g+=t.data[u+1],s.b+=t.data[u+2];return s.r=~~(s.r/l),s.g=~~(s.g/l),s.b=~~(s.b/l),s}(e.target);E(t)}},src:"".concat(s,"/file/").concat(p.avatar)})}),Object(G.jsx)("div",{className:j.avatarContainer,children:Object(G.jsx)(ee.a,{component:"div",variant:"h2",children:Object(G.jsxs)(X.a,{fontWeight:"fontWeightBold",children:[p.first_name," ",p.last_name]})})}),!w&&Object(G.jsxs)("div",{className:j.avatarContainer,children:[!k&&Object(G.jsx)("div",{children:S?Object(G.jsxs)("div",{children:["You sent a request to ",p.first_name,", wait for him to respond :)"]}):F?Object(G.jsxs)("div",{children:[p.first_name," ",p.last_name," has sent you a friend request",Object(G.jsxs)(X.a,{sx:{display:"flex"},children:[Object(G.jsx)(re.a,{color:"secondary",variant:"contained",onClick:Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(p._id);case 2:_();case 3:case"end":return e.stop()}}),e)}))),children:"Accept"}),Object(G.jsx)("div",{style:{flexGrow:1}}),Object(G.jsx)(re.a,{color:"secondary",variant:"contained",sx:{backgroundColor:"gray","&:hover":{backgroundColor:"darkgray"}},onClick:Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(C);case 2:case"end":return e.stop()}}),e)}))),children:"Decline"})]})]}):Object(G.jsxs)("div",{children:["You are not friend with ",p.first_name,Object(G.jsx)(re.a,{color:"primary",variant:"contained",onClick:P,children:"Send a friend request"})]})}),k&&Object(G.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(G.jsxs)(X.a,{children:[p.first_name," ",p.last_name," is your friend :)"]}),Object(G.jsx)(re.a,{color:"primary",variant:"contained",onClick:function(){!function(e){g.post("/user/unfriend",{id:e},{headers:l})}(C)},children:"Unfriend"})]})]}),w&&Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("div",{className:j.avatarContainer,children:"You can upload your picture here, not the greatest solution but what can you do"}),Object(G.jsxs)("div",{className:j.avatarContainer,children:[Object(G.jsx)("input",{accept:"image/*",style:{display:"none"},id:"raised-button-file",onChange:R,type:"file"}),Object(G.jsx)("label",{htmlFor:"raised-button-file",children:Object(G.jsxs)(re.a,{color:"primary",variant:"contained",component:"span",children:["Upload profile picture",Object(G.jsx)(De.a,{style:{marginLeft:"5px"}})]})})]})]})]}),I&&Object(G.jsx)("div",{className:j.centrate,children:Object(G.jsxs)("div",{children:[Object(G.jsx)(ee.a,{component:"div",variant:"h4",children:Object(G.jsx)(X.a,{fontWeight:"fontWeightBold",textAlign:"center",children:"This user does not exist"})}),Object(G.jsx)(ee.a,{component:"div",variant:"h5",children:Object(G.jsx)(X.a,{textAlign:"center",my:2,children:"Check if the url you've accessed is correct"})}),Object(G.jsx)(X.a,{textAlign:"center",my:2,children:Object(G.jsx)(re.a,{onClick:function(){return i(Je.dashboard)},color:"primary",className:j.linkButton,variant:"contained",children:"To Dashboard"})}),Object(G.jsx)(X.a,{textAlign:"center",my:2,children:Object(G.jsx)(re.a,{color:"primary",className:j.linkButton,onClick:function(){d.goBack()},variant:"text",children:"Go Back"})})]})})]})},Ce=n(6),ke=n(311),Se=n(304),Fe=n(315),Ie=n(305),_e=n(316),Re=n(300),Pe=n(295),Be=n(115),Ae=n.n(Be),Ne=n(114),Te=n.n(Ne),Le=n(159),ze=n.n(Le),Me=function(e){var t=new FormData;return t.append("file",e),g.put("/file/",t,{headers:l})},We=Object(Ce.a)(xe.a)((function(e){var t=e.theme;return{position:"relative",display:"inline-flex",width:"34px",height:"34px",marginRight:t.spacing(1),marginLeft:t.spacing(1),cursor:"pointer"}})),Ue=Object(Ce.a)("div")((function(e){var t=e.theme,n=e.highlighted;return{display:"inline-block",marginRight:"auto",borderRadius:"3px",padding:"8px",marginBottom:"4px",background:n?t.palette.secondary.main:t.palette.action.hover,color:n?t.palette.common.white:t.palette.text.primary}})),qe=Object(Ce.a)(te.a)((function(e){var t=e.theme;return{borderRight:"1px solid ".concat(t.palette.divider)}})),Ge=Object(Ce.a)(te.a)((function(e){return{padding:e.theme.spacing(5)}}));function He(e){var t=e.name,n=e.message,c=e.user,i=e.avatar,o=e.position,s=void 0===o?"left":o,l=e.routeTo,d="right"===s,j=/^(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])*$/.test(n),b=Object(r.useState)(!1),f=Object(u.a)(b,2),h=f[0],O=f[1];ge(Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(n);case 3:O(!0),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])}))),[]);var v=Object(G.jsx)(We,{onClick:function(){l&&l(Je.userProfile,{userId:c._id})},alt:t,src:i,children:c.first_name[0]+c.last_name[0]}),g=Object(G.jsxs)(Ue,{highlighted:d.toString(),children:[Object(G.jsx)(X.a,{children:Object(G.jsx)(ee.a,{variant:"body1",children:t})}),h?Object(G.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(G.jsx)("img",{alt:"",style:{height:"100%",width:"100%",objectFit:"cover"},src:n})}):Object(G.jsx)(ee.a,{style:{minWidth:"50px",fontSize:"".concat(j?"40px":"")},children:n.split(" ").map((function(e,t){return n=e,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(n)?Object(G.jsxs)("a",{href:e,target:"_blank",rel:"noreferrer",children:[e,"\xa0"]},Date.now()+"anchor"):Object(G.jsxs)(a.a.Fragment,{children:[e,"\xa0"]},Date.now()+" fragment"+e+t);var n}))})]});return Object(G.jsx)("div",{style:{margin:"30px",textAlign:s},children:Object(G.jsx)("div",{style:{display:"inline-block"},children:d?Object(G.jsxs)(G.Fragment,{children:[g,v]}):Object(G.jsxs)(G.Fragment,{children:[v,g]})})})}var $e=function(){var e,t,n=Object(r.useContext)(H).user,c=Object(r.useContext)($),i=Object(r.useState)("general"),o=Object(u.a)(i,2),d=o[0],j=o[1],b=Object(r.useState)([]),f=Object(u.a)(b,2),h=f[0],p=f[1],O=Object(r.useState)([]),v=Object(u.a)(O,2),y=v[0],D=v[1];ge(Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.chatRooms.length>0)){e.next=7;break}return e.next=3,r=n.chatRooms,g.post("/rooms/search-ids",{ids:r},{headers:l});case 3:t=e.sent,p(t.data),e.next=8;break;case 7:p([]);case 8:case"end":return e.stop()}var r}),e)}))),[n]),ge(Object(x.a)(m.a.mark((function e(){var t,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.map((function(e){return e.members})).flat(),n=Object(fe.a)(new Set(t)),e.next=4,a=n,g.post("/user/search-ids",{ids:a},{headers:l});case 4:r=e.sent,D(r.data);case 6:case"end":return e.stop()}var a}),e)}))),[h]),Object(r.useEffect)((function(){console.log({connectedRoom:d})}),[d]);var E=Ze().routeTo,w=Object(r.useRef)(null),C=Object(r.useRef)(!1),k=a.a.useState(null),S=Object(u.a)(k,2),F=S[0],I=S[1],_=Object(r.useRef)(null),R=Object(r.useRef)(null),P=Object(r.useState)(""),B=Object(u.a)(P,2),A=B[0],N=B[1],T=Object(r.useState)([]),L=Object(u.a)(T,2),z=L[0],M=L[1],W=Object(r.useState)([]),U=Object(u.a)(W,2)[1];Object(r.useEffect)((function(){c.on("message",(function(e){M((function(t){return[].concat(Object(fe.a)(t),[e])}))})),c.on("typing",(function(e){var t=e.user;U((function(e){return[].concat(Object(fe.a)(e),[t])}))})),c.on("stop typing",(function(e){var t=e.user;U((function(e){return e.filter((function(e){return t._id!==e._id}))}))}))}),[]),Object(r.useEffect)((function(){R.current&&(R.current.scrollTop=R.current.scrollHeight)}),[z]);var q=function(e,t){N(A+t.emoji),_.current.focus(),I(null)},V=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.files){e.next=7;break}return n=t.target.files[0],e.next=4,Me(n);case 4:r=e.sent.data,c.emit("message",{content:r.url,room:d}),N("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){I(F?null:e.currentTarget)},J=Object(he.a)((function(e){return e.breakpoints.down("lg")}));return Object(G.jsxs)(te.a,{container:!0,style:{height:"100%",background:"linear-gradient(0deg, rgba(255,255,255,1) 0%, rgba(123,175,153,1) 100%)"},children:[Object(G.jsx)(qe,{item:!0,xs:12,md:4,lg:3,children:Object(G.jsxs)(ke.a,{style:{},children:[Object(G.jsxs)(Se.a,{button:!0,onClick:function(){return j("general")},children:[Object(G.jsx)(Fe.a,{children:Object(G.jsx)(Ie.a,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:Object(G.jsx)(xe.a,{alt:"General"})})}),Object(G.jsx)(_e.a,{primary:"General",secondary:"Click to write in General"})]}),h.map((function(e){var t=y.filter((function(e){return e._id!==n._id})).find((function(t){return t.chatRooms.includes(e._id)}));return Object(G.jsxs)(Se.a,{button:!0,onClick:function(){j(e._id)},children:[Object(G.jsx)(Fe.a,{children:Object(G.jsx)(Ie.a,{children:Object(G.jsx)(xe.a,{onClick:function(e){e.stopPropagation(),E(Je.userProfile,{userId:t._id})},alt:"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name),src:"".concat(s,"/file/").concat(null===t||void 0===t?void 0:t.avatar)})})}),Object(G.jsx)(_e.a,{primary:e.members.length>2?"Group Chat":"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name),secondary:"Contact Me!"})]},e._id)}))]})}),Object(G.jsxs)(te.a,{style:{},item:!0,xs:12,md:8,lg:9,children:[Object(G.jsxs)("div",{ref:R,style:{height:"calc(100vh - 200px)",overflowY:"auto"},children:[Object(G.jsxs)(X.a,{sx:{p:2},children:["Talking with ",null!==(e=null===(t=y.filter((function(e){return e._id!==n._id})).find((function(e){return e.chatRooms.includes(d)})))||void 0===t?void 0:t.first_name)&&void 0!==e?e:"".concat(d)]}),z.filter((function(e){return e.room===d})).map((function(e,t){var r=e.user._id===n._id;return Object(G.jsx)(He,{avatar:n.avatar?"".concat(s,"/file/").concat(e.user.avatar):"",user:e.user,message:e.text,name:r?"You":e.user.first_name,position:r?"right":"left",routeTo:E},e.text+e.user+(new Date).getTime()+t)})),Object(G.jsx)("div",{}),0===z.length&&Object(G.jsx)("div",{children:Object(G.jsx)(ee.a,{variant:"body2",children:"No messages, type your first message ..."})})]}),Object(G.jsx)(Ge,{container:!0,children:Object(G.jsx)(ie.b,{initialValues:{message:A},enableReinitialize:!0,onSubmit:function(){c.emit("message",{content:A,room:d}),N("")},children:function(e){var t=e.values;return Object(G.jsxs)(ie.a,{style:{display:"flex",width:"100%"},children:[Object(G.jsx)(te.a,{item:!0,children:Object(G.jsx)(X.a,{mr:2,children:Object(G.jsxs)("div",{children:[Object(G.jsx)("input",{accept:"image/*",style:{display:"none"},id:"raised-button-file",onChange:V,type:"file"}),Object(G.jsx)("label",{htmlFor:"raised-button-file",children:J?Object(G.jsx)("span",{children:Object(G.jsx)(be.a,{component:"span",color:"primary","aria-label":"add",size:"small",children:Object(G.jsx)(Ae.a,{})})}):Object(G.jsxs)(re.a,{color:"primary",variant:"contained",component:"span",children:["Upload",Object(G.jsx)(Ae.a,{})]})})]})})}),Object(G.jsx)(te.a,{item:!0,children:Object(G.jsxs)(X.a,{mx:2,children:[Object(G.jsx)(be.a,{color:"primary","aria-label":"add",size:"small",onClick:Y,children:Object(G.jsx)(ze.a,{})}),Object(G.jsx)(Re.a,{id:Boolean(F)?"popper":void 0,open:Boolean(F),disablePortal:!0,anchorEl:F,children:Object(G.jsx)(Pe.a,{onClickAway:function(){I(null)},children:Object(G.jsx)(X.a,{mb:2,children:Object(G.jsx)(Te.a,{onEmojiClick:q,disableAutoFocus:!0,skinTone:Ne.SKIN_TONE_MEDIUM_DARK,groupNames:{smileys_people:"PEOPLE"},native:!0})})})})]})}),Object(G.jsx)(te.a,{item:!0,style:{flexGrow:1},children:Object(G.jsx)(ne.a,{inputRef:_,label:"Message..",size:"small",value:t.message,variant:"outlined",fullWidth:!0,onChange:function(e){N(e.target.value),C.current||(C.current=!0,c.emit("typing")),w.current&&clearTimeout(w.current),w.current=setTimeout((function(){w.current=null,C.current=!1,c.emit("stop typing")}),1e3)}})}),Object(G.jsx)(te.a,{item:!0,children:Object(G.jsx)(X.a,{ml:2,children:Object(G.jsx)(re.a,{color:"primary",variant:"contained",type:"submit",children:"Send"})})})]})}})})]})]})},Ve=n(296),Ye=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Ze().routeTo,l=Object(r.useState)(""),d=Object(u.a)(l,2),j=d[0],b=d[1],f=function(){var e=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W({limit:999,offset:0,search:j});case 2:t=e.sent,c(t.data.results);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(G.jsxs)(Ve.a,{sx:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",p:2},children:[Object(G.jsx)(o.a,{title:"Search User"}),Object(G.jsx)(Ve.a,{sx:{width:200},children:Object(G.jsx)(ne.a,{placeholder:"Search users ...",fullWidth:!0,value:j,onChange:function(e){return b(e.target.value)}})}),Object(G.jsx)(Ve.a,{sx:{m:2},children:Object(G.jsx)(ke.a,{children:n.map((function(e){return Object(G.jsx)(a.a.Fragment,{children:Object(G.jsxs)(Se.a,{button:!0,onClick:function(){i(Je.userProfile,{userId:e._id})},children:[Object(G.jsx)(Fe.a,{children:Object(G.jsx)(Ie.a,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:Object(G.jsx)(xe.a,{alt:"Alex Profir",src:"".concat(s,"/file/").concat(e.avatar)})})}),Object(G.jsx)(_e.a,{primary:"".concat(e.first_name," ").concat(e.last_name)})]})},e._id)}))})}),Object(G.jsx)(re.a,{color:"primary",variant:"contained",onClick:f,children:"Search !"})]})},Je={login:function(){return"/login"},register:function(){return"/register"},dashboard:function(){return"/dashboard"},userProfile:function(e){return"/users/".concat(e.userId)},messenger:function(){return"/messenger"},searchUsers:function(){return"/search/users"}};function Ze(){var e=Object(Z.g)();return{routeTo:function(t,n){e.push(t(n))},history:e}}function Ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.fromEntries(t.map((function(e){return[e,":"+e]})));return e(n)}var Xe,Qe={path:"/",guard:se,children:[{component:de,path:Ke(Je.login)},{component:ue,path:Ke(Je.register)}],component:null},et={path:Ke(Je.dashboard),component:null,guard:se,children:[{path:Ke(Je.dashboard),guard:se,component:me},{path:Ke(Je.userProfile,["userId"]),component:we,guard:se},{path:Ke(Je.messenger),guard:se,component:$e},{path:Ke(Je.searchUsers),guard:se,component:Ye}]},tt=[Qe],nt=[{path:"/",component:function(){return Object(G.jsx)(Z.a,{from:"/",to:"/dashboard"})},guard:se,children:null},et],rt=n(161),at=n(306),ct=["title","titleId"];function it(){return it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},it.apply(this,arguments)}function ot(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ut(e,t){var n=e.title,a=e.titleId,c=ot(e,ct);return r.createElement("svg",it({viewBox:"0 0 448 512",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,Xe||(Xe=r.createElement("path",{fill:"currentColor",d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z",className:""})))}var st,lt=r.forwardRef(ut),dt=(n.p,["title","titleId"]);function jt(){return jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jt.apply(this,arguments)}function bt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ft(e,t){var n=e.title,a=e.titleId,c=bt(e,dt);return r.createElement("svg",jt({viewBox:"0 0 28 28",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,st||(st=r.createElement("path",{d:"M7.847 23.488C9.207 23.488 11.443 23.363 14.467 22.806 13.944 24.228 12.581 25.247 10.98 25.247 9.649 25.247 8.483 24.542 7.825 23.488L7.847 23.488ZM24.923 15.73C25.17 17.002 24.278 18.127 22.27 19.076 21.17 19.595 18.724 20.583 14.684 21.369 11.568 21.974 9.285 22.113 7.848 22.113 7.421 22.113 7.068 22.101 6.79 22.085 4.574 21.958 3.324 21.248 3.077 19.976 2.702 18.049 3.295 17.305 4.278 16.073L4.537 15.748C5.2 14.907 5.459 14.081 5.035 11.902 4.086 7.022 6.284 3.687 11.064 2.753 15.846 1.83 19.134 4.096 20.083 8.977 20.506 11.156 21.056 11.824 21.986 12.355L21.986 12.356 22.348 12.561C23.72 13.335 24.548 13.802 24.923 15.73Z"})))}var ht,pt=r.forwardRef(ft),Ot=(n.p,["title","titleId"]);function mt(){return mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}function xt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function vt(e,t){var n=e.title,a=e.titleId,c=xt(e,Ot);return r.createElement("svg",mt({viewBox:"0 0 320 512",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,ht||(ht=r.createElement("path",{d:"M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z",className:""})))}var gt,yt=r.forwardRef(vt),Dt=(n.p,["title","titleId"]);function Et(){return Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Et.apply(this,arguments)}function wt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ct(e,t){var n=e.title,a=e.titleId,c=wt(e,Dt);return r.createElement("svg",Et({viewBox:"0 0 320 512",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,gt||(gt=r.createElement("path",{d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z",className:""})))}var kt,St=r.forwardRef(Ct),Ft=(n.p,["title","titleId"]);function It(){return It=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},It.apply(this,arguments)}function _t(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Rt(e,t){var n=e.title,a=e.titleId,c=_t(e,Ft);return r.createElement("svg",It({viewBox:"0 0 256 512",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,kt||(kt=r.createElement("path",{d:"M24.707 38.101L4.908 57.899c-4.686 4.686-4.686 12.284 0 16.971L185.607 256 4.908 437.13c-4.686 4.686-4.686 12.284 0 16.971L24.707 473.9c4.686 4.686 12.284 4.686 16.971 0l209.414-209.414c4.686-4.686 4.686-12.284 0-16.971L41.678 38.101c-4.687-4.687-12.285-4.687-16.971 0z",className:""})))}var Pt,Bt=r.forwardRef(Rt),At=(n.p,["title","titleId"]);function Nt(){return Nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nt.apply(this,arguments)}function Tt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Lt(e,t){var n=e.title,a=e.titleId,c=Tt(e,At);return r.createElement("svg",Nt({viewBox:"0 0 512 512",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,Pt||(Pt=r.createElement("path",{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z",className:""})))}var zt,Mt=r.forwardRef(Lt),Wt=(n.p,["title","titleId"]);function Ut(){return Ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ut.apply(this,arguments)}function qt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Gt(e,t){var n=e.title,a=e.titleId,c=qt(e,Wt);return r.createElement("svg",Ut({viewBox:"0 0 28 28",alt:"",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,zt||(zt=r.createElement("path",{d:"M14 2.042c6.76 0 12 4.952 12 11.64S20.76 25.322 14 25.322a13.091 13.091 0 0 1-3.474-.461.956 .956 0 0 0-.641.047L7.5 25.959a.961.961 0 0 1-1.348-.849l-.065-2.134a.957.957 0 0 0-.322-.684A11.389 11.389 0 0 1 2 13.682C2 6.994 7.24 2.042 14 2.042ZM6.794 17.086a.57.57 0 0 0 .827.758l3.786-2.874a.722.722 0 0 1 .868 0l2.8 2.1a1.8 1.8 0 0 0 2.6-.481l3.525-5.592a.57.57 0 0 0-.827-.758l-3.786 2.874a.722.722 0 0 1-.868 0l-2.8-2.1a1.8 1.8 0 0 0-2.6.481Z"})))}var Ht,$t=r.forwardRef(Gt),Vt=(n.p,["title","titleId"]);function Yt(){return Yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yt.apply(this,arguments)}function Jt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Zt(e,t){var n=e.title,a=e.titleId,c=Jt(e,Vt);return r.createElement("svg",Yt({"aria-hidden":"true",viewBox:"0 0 448 512",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,Ht||(Ht=r.createElement("path",{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",className:""})))}var Kt=r.forwardRef(Zt),Xt=(n.p,n(160)),Qt=n.n(Xt),en=["label","action","CustomDropdown"],tn=Object(r.createContext)([null,function(){}]),nn=function(e){var t=e.children;return Object(G.jsx)("nav",{className:"navbar",children:Object(G.jsx)("ul",{className:"navbar-nav",children:t})})},rn=function(e){var t=e.userId,n=Object(r.useState)(null),a=Object(u.a)(n,2),c=a[0],i=a[1],o=Ze().routeTo;return ge(Object(x.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:n=e.sent,i(n.data);case 4:case"end":return e.stop()}}),e)}))),[]),Object(G.jsx)("a",{className:"menu-item",style:{height:"auto"},children:Object(G.jsx)(tn.Consumer,{children:function(e){var n=Object(u.a)(e,2)[1];return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("span",{className:"icon-button",children:Object(G.jsx)(xe.a,{alt:"my-profile",onClick:function(){o(Je.userProfile,{userId:t})},src:(null===c||void 0===c?void 0:c.avatar)?"".concat(s,"/file/").concat(null===c||void 0===c?void 0:c.avatar):""})}),Object(G.jsxs)(X.a,{children:[Object(G.jsxs)(ee.a,{component:"div",variant:"body1",children:[Object(G.jsx)("strong",{children:c?"".concat(null===c||void 0===c?void 0:c.first_name," ").concat(null===c||void 0===c?void 0:c.last_name):"Loading ..."})," wants to be friend with you :)"]}),Object(G.jsxs)(X.a,{sx:{display:"flex"},children:[Object(G.jsx)(re.a,{color:"secondary",variant:"contained",onClick:Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:n(null);case 3:case"end":return e.stop()}}),e)}))),children:"Accept"}),Object(G.jsx)("div",{style:{flexGrow:1}}),Object(G.jsx)(re.a,{color:"secondary",variant:"contained",sx:{backgroundColor:"gray","&:hover":{backgroundColor:"darkgray"}},onClick:Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:n(null);case 3:case"end":return e.stop()}}),e)}))),children:"Decline"})]})]})]})}})})};function an(e){return function(){return Object(G.jsx)(rn,{userId:e})}}function cn(e){var t=e.menuInitial,n=e.options,a=Object(r.useContext)(tn),c=Object(u.a)(a,2)[1],i=Object(r.useState)(t),o=Object(u.a)(i,2),s=o[0],l=o[1],d=Object(r.useState)(),j=Object(u.a)(d,2),b=j[0],f=j[1],h=Object(r.useRef)(null);function p(e){var t=e.clientHeight+32;f(t)}Object(r.useEffect)((function(){var e;f((null===(e=h.current)||void 0===e?void 0:e.firstChild.clientHeight)+32)}),[]);var O=function(e){var t=e.children,n=e.rightIcon,r=e.leftIcon,a=e.goToMenu,c=e.onClick;return Object(G.jsxs)("a",{className:"menu-item",onClick:function(){a&&l(a),c&&c()},children:[Object(G.jsx)("span",{className:"icon-button",children:r}),t,Object(G.jsx)("span",{className:"icon-right",children:n})]})};return Object(G.jsx)(Pe.a,{touchEvent:"onTouchStart",onClickAway:function(){c(null)},children:Object(G.jsx)("div",{className:"dropdown",ref:h,style:{height:b},children:n.map((function(e,t){return Object(G.jsx)(at.a,{in:s===e.entryPoint,timeout:500,classNames:"menu-".concat(e.type),unmountOnExit:!0,onEnter:p,children:Object(G.jsx)("div",{className:"menu",children:e.options.map((function(e,n){var r=e.label,a=e.action,c=e.CustomDropdown,i=Object(rt.a)(e,en),o=null!==c&&void 0!==c?c:O;return Object(G.jsx)(o,Object(S.a)(Object(S.a)({onClick:a},i),{},{children:r}),n+r.toString()+t)}))})},t+"css-transition"+e.entryPoint)}))})})}var on=function(e){var t=e.icon,n=e.name,a=e.onClick,c=e.children,i=e.badgeContent,o=Object(r.useContext)(tn),s=Object(u.a)(o,2),l=s[0],d=s[1],j=l===n;return Object(G.jsxs)("li",{className:"nav-item",children:[Object(G.jsx)(Ie.a,{badgeContent:i,className:"icon-button ".concat(j&&"open"),onClick:function(){a&&a(),d(j?null:n)},color:"primary",children:t}),j&&c]})},un=function(e){var t=e.children,n=Object(r.useContext)(H),a=n.logout,c=n.user,i=Ze().routeTo,o=Object(r.useState)(null),l=Object(u.a)(o,2),d=l[0],j=l[1],b=[{icon:Object(G.jsx)($t,{}),name:"messenger",action:function(){i(Je.messenger)}},{icon:Object(G.jsx)(pt,{}),name:"bell",badgeContent:c.friendRequests.length,dropdownEntryPoint:"main",dropdownMenu:c.friendRequests.length>0?[{entryPoint:"main",type:"primary",options:c.friendRequests.map((function(e){return{label:"",CustomDropdown:an(e)}}))}]:null},{icon:Object(G.jsx)(Kt,{}),name:"plus",action:function(){i(Je.searchUsers)}},{icon:Object(G.jsx)(St,{}),name:"dropdown",dropdownEntryPoint:"main",dropdownMenu:[{entryPoint:"main",type:"primary",options:[{label:"My Profile",action:function(){c&&i(Je.userProfile,{userId:c._id})},leftIcon:c?Object(G.jsx)(xe.a,{alt:"my-profile",src:c.avatar?"".concat(s,"/file/").concat(c.avatar):""}):void 0},{leftIcon:Object(G.jsx)(Mt,{}),rightIcon:Object(G.jsx)(Bt,{}),goToMenu:"settings",label:"Settings"},{leftIcon:Object(G.jsx)(Qt.a,{}),label:"Logout",action:a}]},{entryPoint:"settings",type:"secondary",options:[{leftIcon:Object(G.jsx)(lt,{}),label:Object(G.jsx)("h2",{children:"Settings"}),goToMenu:"main"},{label:"Generic Text",leftIcon:Object(G.jsx)(yt,{})},{label:"Generic Text",leftIcon:Object(G.jsx)(yt,{})},{label:"Generic Text",leftIcon:Object(G.jsx)(yt,{})}]}]}];return Object(G.jsxs)("div",{style:{height:"100%"},children:[Object(G.jsx)(tn.Provider,{value:[d,j],children:Object(G.jsx)(nn,{children:b.map((function(e,t){return Object(G.jsx)(on,{icon:e.icon,name:e.name,onClick:e.action,badgeContent:e.badgeContent,children:e.dropdownMenu&&e.dropdownEntryPoint&&Object(G.jsx)(cn,{menuInitial:e.dropdownEntryPoint,options:e.dropdownMenu})},t+"nav-item")}))})}),Object(G.jsx)("div",{style:{height:"calc(100% - 60px)",overflowX:"hidden",maxWidth:"100vw"},children:t})]})},sn=function(){var e=Ze().routeTo;return Object(G.jsxs)(a.a.Fragment,{children:[Object(G.jsx)(o.a,{title:"404 Not Found"}),Object(G.jsxs)(te.a,{container:!0,alignItems:"center",direction:"column",justifyContent:"center",style:{height:"100%"},children:[Object(G.jsx)(te.a,{item:!0,children:Object(G.jsx)("img",{src:"not_found.jpg",alt:"Not Found"})}),Object(G.jsx)(te.a,{item:!0,children:Object(G.jsx)(re.a,{variant:"contained",color:"primary",onClick:function(){e(Je.dashboard)},children:"Take me back"})})]})]})},ln=function(e){var t=e.children;return Object(G.jsx)(X.a,{style:{height:"100vh"},children:t})},dn=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],c=B();return Object(r.useEffect)((function(){function e(){return(e=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(),e.next=4,E();case 4:t=e.sent,c({type:"SET_USER",user:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:return e.prev=11,a(!0),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),{checked:n}},jn=Object(Ce.a)(X.a)((function(e){return{height:"100%",background:e.theme.palette.background.paper}})),bn=function(){return Object(G.jsx)(jn,{})},fn=function(e,t){return t.map((function(t,n){var r=t.component,c=t.children,i=t.path,o=t.guard||a.a.Fragment;return c?c.map((function(t,n){var r=t.guard||a.a.Fragment,c=t.component||a.a.Fragment;return Object(G.jsx)(Z.b,{path:t.path,exact:!0,render:function(t){return Object(G.jsx)(r,{children:Object(G.jsx)(e,{children:Object(G.jsx)(c,Object(S.a)({},t))})})}},n)})):r?Object(G.jsx)(Z.b,{path:i,exact:!0,render:function(t){return Object(G.jsx)(o,{children:Object(G.jsx)(e,{children:Object(G.jsx)(r,Object(S.a)({},t))})})}},n):null}))};function hn(){return dn().checked?Object(G.jsx)(K.a,{children:Object(G.jsxs)(Z.d,{children:[fn(un,nt),fn(ln,tt),Object(G.jsx)(Z.b,{children:Object(G.jsx)(sn,{})})]})}):Object(G.jsx)(bn,{})}n(240);var pn=n(298),On=n(299),mn=n(317),xn=n(116),vn=n(297),gn={primary:{main:"rgb(123,175,153)",contrastText:"#FFF"},secondary:{main:"#46624c",contrastText:"#FFF"}},yn={fontSize:13,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500,fontWeightBold:600};var Dn=function(){return Object(G.jsx)(a.a.Fragment,{children:Object(G.jsxs)(o.b,{children:[Object(G.jsx)(o.a,{titleTemplate:"%s | Roly Poly",defaultTitle:"Roly Poly"}),Object(G.jsx)(pn.a,{}),Object(G.jsx)(On.a,{injectFirst:!0,children:Object(G.jsx)(mn.a,{theme:Object(xn.a)(Object(vn.a)({typography:yn,palette:gn})),children:Object(G.jsx)(k.a,{store:A,children:Object(G.jsx)(J,{children:Object(G.jsx)(hn,{})})})})})]})})},En=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,318)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(G.jsx)(Dn,{}),document.getElementById("root")),En()}},[[241,1,2]]]);
//# sourceMappingURL=main.e6643b93.chunk.js.map